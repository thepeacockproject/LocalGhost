{
  "children": {
    "$each $.Item.Data": {
      "view": "menu3.basic.LiveTileSmall",
      "pressable": {
        "$switch $.Contract.Metadata.Type": [
          {
            "case": "usercreated",
            "return": {
              "$if $($arg _ugcrestricted)": {
                "$then": false,
                "$else": true
              }
            }
          },
          {
            "default": true
          }
        ]
      },
      "stateproviders": [
        {
          "type": "contractavailability",
          "contract": "$.Contract"
        }
      ],
      "data": {
        "$mergeobjects": [
          {
            "$mergeobjects": [
              {
                "$switch $.Contract.Metadata.Type": [
                  {
                    "case": "usercreated",
                    "return": {
                      "$if $($arg _ugcrestricted)": {
                        "$then": {
                          "header": {
                            "$setup": {
                              "$set Type": "$loc $formatstring UI_CONTRACT_HEADER_{$.Contract.Metadata.Type}",
                              "$set City": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                              "$in": "$formatstring {$.Type} / {$.City}"
                            }
                          },
                          "title": {
                            "$switch $.Contract.Metadata.Type": [
                              {
                                "case": "usercreated",
                                "return": {
                                  "$if $($arg _ugcrestricted)": {
                                    "$then": "$loc UI_CONTRACT_NO_ACCESS_UGC",
                                    "$else": "$.Contract.Metadata.Title"
                                  }
                                }
                              },
                              {
                                "case": "featured",
                                "return": "$.Contract.Metadata.Title"
                              },
                              {
                                "default": "$loc $.Contract.Metadata.Title"
                              }
                            ]
                          },
                          "locked": true,
                          "lockedreason": "$loc UI_CONTRACT_NO_ACCESS_UGC_DESCRIPTION",
                          "icon": "locked",
                          "isMarkedForDeletion": false
                        },
                        "$else": {
                          "header": {
                            "$setup": {
                              "$set Type": "$loc $formatstring UI_CONTRACT_HEADER_{$.Contract.Metadata.Type}",
                              "$set City": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                              "$in": "$formatstring {$.Type} / {$.City}"
                            }
                          },
                          "title": "$.Contract.Metadata.Title",
                          "icon": "$.Contract.Metadata.Type",
                          "locked": "$.Data.IsLocked",
                          "lockedreason": "$loc $.Data.LockedReason",
                          "isMarkedForDeletion": {
                            "$if $eqs ($($arg HitsCategory),MyPlaylist)": {
                              "$then": "$favrem:ismarkedforplaylistremoval $.Contract.Metadata.Id",
                              "$else": false
                            }
                          }
                        }
                      }
                    }
                  },
                  {
                    "case": "featured",
                    "return": {
                      "header": {
                        "$setup": {
                          "$set Type": "$loc UI_MENU_PAGE_HUB_FEATURED",
                          "$set City": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                          "$in": "$formatstring {$.Type} / {$.City}"
                        }
                      },
                      "title": "$.Contract.Metadata.Title",
                      "icon": "$.Contract.Metadata.Type",
                      "locked": "$.Data.IsLocked",
                      "lockedreason": "$loc $.Data.LockedReason"
                    }
                  },
                  {
                    "default": {
                      "header": {
                        "$if $not $isnull $.headeroverride": {
                          "$then": "$.headeroverride",
                          "$else": {
                            "$if": {
                              "$condition": {
                                "$or": [
                                  "$eqs ($.EngineMode,singleplayer)",
                                  "$eqs ($.EngineMode,multiplayer)"
                                ]
                              },
                              "$then": {
                                "$if $eqs ($.EngineMode,multiplayer)": {
                                  "$then": "$loc UI_MENU_GAME_MODE_MULTIPLAYER",
                                  "$else": "$loc UI_MENU_GAME_MODE_SINGLE_PLAYER"
                                }
                              },
                              "$else": {
                                "$switch $.Contract.Metadata.Type": [
                                  {
                                    "case": "campaign",
                                    "return": "$loc $.Contract.Metadata.GroupTitle"
                                  },
                                  {
                                    "case": "flashback",
                                    "return": {
                                      "$if": {
                                        "$condition": {
                                          "$and": [
                                            "$eqs ($.Contract.Metadata.Type,flashback)",
                                            "$not $.Data.IsFreeDLC"
                                          ]
                                        },
                                        "$then": {
                                          "$if $not $stringvalid $.Contract.Metadata.Subtype": {
                                            "$then": "$loc UI_CONTRACT_HEADER_SEASONAL",
                                            "$else": "$loc $formatstring UI_CONTRACT_HEADER_{$.Contract.Metadata.Subtype}"
                                          }
                                        },
                                        "$else": "$loc $formatstring UI_CONTRACT_HEADER_{$.Contract.Metadata.Type}"
                                      }
                                    }
                                  },
                                  {
                                    "default": "$loc $formatstring UI_CONTRACT_HEADER_{$.Contract.Metadata.Type}"
                                  }
                                ]
                              }
                            }
                          }
                        }
                      },
                      "title": {
                        "$if $isnull $.titleoverride": {
                          "$then": "$loc $.Contract.Metadata.Title",
                          "$else": "$.titleoverride"
                        }
                      },
                      "icon": {
                        "$if $isnull $.iconoverride": {
                          "$then": {
                            "$switch $.Contract.Metadata.Type": [
                              {
                                "case": "dummy",
                                "return": {
                                  "_dynamicPackerOverride": [
                                    "SniperChallenge"
                                  ]
                                }
                              },
                              {
                                "case": "orbis",
                                "return": "ica"
                              },
                              {
                                "case": "campaign",
                                "return": "mission"
                              },
                              {
                                "case": "sniper",
                                "return": "sniperrifle"
                              },
                              {
                                "default": {
                                  "$if $.Contract.Metadata.IsVersus": {
                                    "$then": "versus",
                                    "$else": "$.Contract.Metadata.Type"
                                  }
                                }
                              }
                            ]
                          },
                          "$else": "$.iconoverride"
                        }
                      },
                      "locked": {
                        "$if": {
                          "$condition": "$isnull $.lockoverride",
                          "$then": "$.Data.IsLocked",
                          "$else": "$.lockoverride"
                        }
                      },
                      "lockedreason": {
                        "$switch $.Contract.Metadata.Type": [
                          {
                            "case": "orbis",
                            "return": {
                              "$loc": {
                                "key": "UI_LOCKED_CONTENT_INFO_TEXT",
                                "data": "$loc $.Data.LockedReason"
                              }
                            }
                          },
                          {
                            "default": "$loc $.Data.LockedReason"
                          }
                        ]
                      },
                      "elusivecontractstate": "$.Data.ElusiveContractState",
                      "completedlevels": "$.Data.EscalationCompletedLevels",
                      "totallevels": "$.Data.EscalationTotalLevels"
                    }
                  }
                ]
              },
              {
                "playableSince": "$as3date $.Contract.Metadata.PlayableSince",
                "playableUntil": "$as3date $.Contract.Metadata.PlayableUntil",
                "lastPlayedAt": {
                  "$if $.Data.LastPlayedAt": {
                    "$then": "$as3date $.Data.LastPlayedAt",
                    "$else": null
                  }
                },
                "barcodeHeader": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                "barcodeTitle": "$loc $formatstring UI_{$.Contract.Metadata.Location}_COUNTRY",
                "image": {
                  "$if $.tileimageoverride": {
                    "$then": "$res $.tileimageoverride",
                    "$else": {
                      "$if $.Contract.Metadata.TileImage": {
                        "$then": {
                          "$if $gt ($arraysize $.Contract.Metadata.TileImage,0)": {
                            "$then": {
                              "$setup": {
                                "$set EngineMode": {
                                  "$if $isnull $.EngineMode": {
                                    "$then": {
                                      "$if $isnull $arg EngineMode": {
                                        "$then": "singleplayer",
                                        "$else": "$arg EngineMode"
                                      }
                                    },
                                    "$else": "$.EngineMode"
                                  }
                                },
                                "$set TileImageOrdered": {
                                  "$orderby": {
                                    "from": "$expand $.Contract.Metadata.TileImage",
                                    "by": "Mode",
                                    "order": [
                                      "$.EngineMode"
                                    ]
                                  }
                                },
                                "$in": "$res $.TileImageOrdered[0].Image"
                              }
                            },
                            "$else": "$res $expand $.Contract.Metadata.TileImage"
                          }
                        },
                        "$else": "$res images/ui/tiles/defaultmenutilesmall.jpg"
                      }
                    }
                  }
                },
                "completionstate": {
                  "$switch $.Contract.Metadata.Type": [
                    {
                      "case": "usercreated",
                      "return": {
                        "$if $.Data.LastPlayedAt": {
                          "$then": {
                            "$if $.Data.Completed": {
                              "$then": "completed",
                              "$else": "failed"
                            }
                          }
                        }
                      }
                    },
                    {
                      "case": "featured",
                      "return": {
                        "$if $.Data.LastPlayedAt": {
                          "$then": {
                            "$if $.Data.Completed": {
                              "$then": "completed",
                              "$else": "failed"
                            }
                          }
                        }
                      }
                    },
                    {
                      "case": "escalation",
                      "return": {
                        "$if $.Data.LastPlayedAt": {
                          "$then": {
                            "$if $.Data.EscalationCompleted": {
                              "$then": "completed"
                            }
                          }
                        }
                      }
                    },
                    {
                      "case": "placeholder",
                      "return": {
                        "$if $.Data.LastPlayedAt": {
                          "$then": {
                            "$if $.Data.EscalationCompleted": {
                              "$then": "completed"
                            }
                          }
                        }
                      }
                    }
                  ]
                },
                "isInPlaylist": "$.Data.PlaylistData.IsAdded"
              }
            ]
          },
          {
            "mousewheelmode": "group-prev-next",
            "hidebarcode": false
          }
        ]
      },
      "actions": {
        "$mergeobjects": [
          {
            "select": {
              "replace-children": {
                "target": "headline_container",
                "children": [
                  {
                    "$switch $.Contract.Metadata.Type": [
                      {
                        "case": "usercreated",
                        "return": {
                          "$if $($arg _ugcrestricted)": {
                            "$then": {
                              "view": "menu3.basic.HeadlineElement",
                              "selectable": false,
                              "pressable": false,
                              "data": {
                                "header": "$loc $formatstring UI_CONTRACT_HEADER_{$.Contract.Metadata.Type}",
                                "title": "$loc UI_CONTRACT_NO_ACCESS_UGC_DESCRIPTION",
                                "typeicon": "contract"
                              }
                            },
                            "$else": {
                              "$setup": {
                                "$set Tags": {
                                  "$sm:createtags": {
                                    "id": "$.Contract.Metadata.Id",
                                    "tags": "$.Data.MatchingTags"
                                  }
                                },
                                "$in": {
                                  "view": {
                                    "$if $($arraysize $.Tags)": {
                                      "$then": "menu3.basic.HeadlineWithTags",
                                      "$else": "menu3.basic.HeadlineElement"
                                    }
                                  },
                                  "selectable": false,
                                  "pressable": false,
                                  "data": {
                                    "header": {
                                      "$setup": {
                                        "$set Type": "$loc $formatstring UI_CONTRACT_HEADER_{$.Contract.Metadata.Type}",
                                        "$set City": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                                        "$set Mission": "$loc $formatstring UI_{$.Contract.Metadata.Location}_TITLE",
                                        "$in": "$formatstring {$.Type} / {$.City} / {$.Mission}"
                                      }
                                    },
                                    "creatorname": "$($user $.Contract.Metadata.CreatorUserId).name",
                                    "publicid": "$formatpublicid $.Contract.Metadata.PublicId",
                                    "title": "$.Contract.Metadata.Title",
                                    "typeicon": "$.Contract.Metadata.Type",
                                    "tags": "$.Tags"
                                  },
                                  "stateproviders": [
                                    {
                                      "type": "userresolution",
                                      "target": "creatorname",
                                      "profileid": "$.Contract.Metadata.CreatorUserId"
                                    }
                                  ]
                                }
                              }
                            }
                          }
                        }
                      },
                      {
                        "case": "featured",
                        "return": {
                          "view": "menu3.basic.HeadlineElement",
                          "selectable": false,
                          "pressable": false,
                          "data": {
                            "header": {
                              "$setup": {
                                "$set Type": "$loc UI_MENU_PAGE_HUB_FEATURED",
                                "$set City": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                                "$set Mission": "$loc $formatstring UI_{$.Contract.Metadata.Location}_TITLE",
                                "$in": "$formatstring {$.Type} / {$.City} / {$.Mission}"
                              }
                            },
                            "creatorname": "$loc UI_CATEGORY_MESSAGE_CENTER_COMMUNITY",
                            "title": "$.Contract.Metadata.Title",
                            "typeicon": "$.Contract.Metadata.Type"
                          }
                        }
                      },
                      {
                        "case": "tutorial",
                        "return": {
                          "view": "menu3.basic.HeadlineElement",
                          "selectable": false,
                          "pressable": false,
                          "data": {
                            "header": {
                              "$setup": {
                                "$set Type": "$loc $formatstring UI_CONTRACT_HEADER_{$.Contract.Metadata.Type}",
                                "$set City": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                                "$in": "$formatstring {$.Type} / {$.City} "
                              }
                            },
                            "title": "$loc $.Contract.Metadata.Title",
                            "typeicon": {
                              "$switch $.Contract.Metadata.Type": [
                                {
                                  "case": "dummy",
                                  "return": {
                                    "_dynamicPackerOverride": [
                                      "SniperChallenge"
                                    ]
                                  }
                                },
                                {
                                  "case": "orbis",
                                  "return": "ica"
                                },
                                {
                                  "case": "campaign",
                                  "return": "mission"
                                },
                                {
                                  "case": "sniper",
                                  "return": "sniperrifle"
                                },
                                {
                                  "default": {
                                    "$if $.Contract.Metadata.IsVersus": {
                                      "$then": "versus",
                                      "$else": "$.Contract.Metadata.Type"
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        }
                      },
                      {
                        "case": "mission",
                        "return": {
                          "view": "menu3.basic.HeadlineElement",
                          "selectable": false,
                          "pressable": false,
                          "data": {
                            "header": {
                              "$setup": {
                                "$set Type": "$loc $formatstring UI_CONTRACT_HEADER_{$.Contract.Metadata.Type}",
                                "$set City": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                                "$in": "$formatstring {$.Type} / {$.City}"
                              }
                            },
                            "title": "$loc $.Contract.Metadata.Title",
                            "typeicon": {
                              "$switch $.Contract.Metadata.Type": [
                                {
                                  "case": "dummy",
                                  "return": {
                                    "_dynamicPackerOverride": [
                                      "SniperChallenge"
                                    ]
                                  }
                                },
                                {
                                  "case": "orbis",
                                  "return": "ica"
                                },
                                {
                                  "case": "campaign",
                                  "return": "mission"
                                },
                                {
                                  "case": "sniper",
                                  "return": "sniperrifle"
                                },
                                {
                                  "default": {
                                    "$if $.Contract.Metadata.IsVersus": {
                                      "$then": "versus",
                                      "$else": "$.Contract.Metadata.Type"
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        }
                      },
                      {
                        "case": "flashback",
                        "return": {
                          "view": "menu3.basic.HeadlineElement",
                          "selectable": false,
                          "pressable": false,
                          "data": {
                            "header": {
                              "$setup": {
                                "$set Type": {
                                  "$if": {
                                    "$condition": {
                                      "$and": [
                                        "$eqs ($.Contract.Metadata.Type,flashback)",
                                        "$not $.Data.IsFreeDLC"
                                      ]
                                    },
                                    "$then": {
                                      "$if $not $stringvalid $.Contract.Metadata.Subtype": {
                                        "$then": "$loc UI_CONTRACT_HEADER_SEASONAL",
                                        "$else": "$loc $formatstring UI_CONTRACT_HEADER_{$.Contract.Metadata.Subtype}"
                                      }
                                    },
                                    "$else": "$loc $formatstring UI_CONTRACT_HEADER_{$.Contract.Metadata.Type}"
                                  }
                                },
                                "$set City": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                                "$in": "$formatstring {$.Type} / {$.City}"
                              }
                            },
                            "title": "$loc $.Contract.Metadata.Title",
                            "typeicon": {
                              "$switch $.Contract.Metadata.Type": [
                                {
                                  "case": "dummy",
                                  "return": {
                                    "_dynamicPackerOverride": [
                                      "SniperChallenge"
                                    ]
                                  }
                                },
                                {
                                  "case": "orbis",
                                  "return": "ica"
                                },
                                {
                                  "case": "campaign",
                                  "return": "mission"
                                },
                                {
                                  "case": "sniper",
                                  "return": "sniperrifle"
                                },
                                {
                                  "default": {
                                    "$if $.Contract.Metadata.IsVersus": {
                                      "$then": "versus",
                                      "$else": "$.Contract.Metadata.Type"
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        }
                      },
                      {
                        "case": "campaign",
                        "return": {
                          "view": "menu3.basic.HeadlineElement",
                          "selectable": false,
                          "pressable": false,
                          "data": {
                            "header": {
                              "$setup": {
                                "$set Type": "$loc $.Contract.Metadata.GroupTitle",
                                "$set City": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                                "$in": "$formatstring {$.Type} / {$.City}"
                              }
                            },
                            "title": "$loc $.Contract.Metadata.Title",
                            "typeicon": {
                              "$switch $.Contract.Metadata.Type": [
                                {
                                  "case": "dummy",
                                  "return": {
                                    "_dynamicPackerOverride": [
                                      "SniperChallenge"
                                    ]
                                  }
                                },
                                {
                                  "case": "orbis",
                                  "return": "ica"
                                },
                                {
                                  "case": "campaign",
                                  "return": "mission"
                                },
                                {
                                  "case": "sniper",
                                  "return": "sniperrifle"
                                },
                                {
                                  "default": {
                                    "$if $.Contract.Metadata.IsVersus": {
                                      "$then": "versus",
                                      "$else": "$.Contract.Metadata.Type"
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        }
                      },
                      {
                        "case": "sniper",
                        "return": {
                          "view": "menu3.basic.HeadlineElement",
                          "selectable": false,
                          "pressable": false,
                          "data": {
                            "header": {
                              "$setup": {
                                "$set EngineMode": {
                                  "$if $isnull $.EngineMode": {
                                    "$then": {
                                      "$if $isnull $arg EngineMode": {
                                        "$then": "singleplayer",
                                        "$else": "$arg EngineMode"
                                      }
                                    },
                                    "$else": "$.EngineMode"
                                  }
                                },
                                "$set Type": "$loc $formatstring UI_CONTRACT_HEADER_{$.Contract.Metadata.Type}",
                                "$set City": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                                "$set EngineModeName": {
                                  "$if": {
                                    "$condition": {
                                      "$or": [
                                        "$eqs ($.EngineMode,singleplayer)",
                                        "$eqs ($.EngineMode,multiplayer)"
                                      ]
                                    },
                                    "$then": {
                                      "$if $eqs ($.EngineMode,multiplayer)": {
                                        "$then": "$formatstring  / {$loc UI_MENU_GAME_MODE_MULTIPLAYER}",
                                        "$else": "$formatstring  / {$loc UI_MENU_GAME_MODE_SINGLE_PLAYER}"
                                      }
                                    },
                                    "$else": ""
                                  }
                                },
                                "$in": "$formatstring {$.City}{$.EngineModeName}"
                              }
                            },
                            "title": "$loc $.Contract.Metadata.Title",
                            "typeicon": {
                              "$switch $.Contract.Metadata.Type": [
                                {
                                  "case": "dummy",
                                  "return": {
                                    "_dynamicPackerOverride": [
                                      "SniperChallenge"
                                    ]
                                  }
                                },
                                {
                                  "case": "orbis",
                                  "return": "ica"
                                },
                                {
                                  "case": "campaign",
                                  "return": "mission"
                                },
                                {
                                  "case": "sniper",
                                  "return": "sniperrifle"
                                },
                                {
                                  "default": {
                                    "$if $.Contract.Metadata.IsVersus": {
                                      "$then": "versus",
                                      "$else": "$.Contract.Metadata.Type"
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        }
                      },
                      {
                        "case": "placeholder",
                        "return": {
                          "view": "menu3.basic.HeadlineElement",
                          "selectable": false,
                          "pressable": false,
                          "data": {
                            "header": {
                              "$setup": {
                                "$set Type": "$loc $formatstring UI_CONTRACT_HEADER_{$.Contract.Metadata.Type}",
                                "$set City": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                                "$in": "$formatstring {$.Type} / {$.City}"
                              }
                            },
                            "title": "$loc $.Contract.Metadata.Title",
                            "typeicon": {
                              "$switch $.Contract.Metadata.Type": [
                                {
                                  "case": "dummy",
                                  "return": {
                                    "_dynamicPackerOverride": [
                                      "SniperChallenge"
                                    ]
                                  }
                                },
                                {
                                  "case": "orbis",
                                  "return": "ica"
                                },
                                {
                                  "case": "campaign",
                                  "return": "mission"
                                },
                                {
                                  "case": "sniper",
                                  "return": "sniperrifle"
                                },
                                {
                                  "default": {
                                    "$if $.Contract.Metadata.IsVersus": {
                                      "$then": "versus",
                                      "$else": "$.Contract.Metadata.Type"
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        }
                      },
                      {
                        "default": {
                          "view": "menu3.basic.HeadlineElement",
                          "selectable": false,
                          "pressable": false,
                          "data": {
                            "header": {
                              "$setup": {
                                "$set Type": "$loc $formatstring UI_CONTRACT_HEADER_{$.Contract.Metadata.Type}",
                                "$set City": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                                "$set Mission": "$loc $formatstring UI_{$.Contract.Metadata.Location}_TITLE",
                                "$in": "$formatstring {$.Type} / {$.City} / {$.Mission}"
                              }
                            },
                            "title": "$loc $.Contract.Metadata.Title",
                            "typeicon": {
                              "$switch $.Contract.Metadata.Type": [
                                {
                                  "case": "dummy",
                                  "return": {
                                    "_dynamicPackerOverride": [
                                      "SniperChallenge"
                                    ]
                                  }
                                },
                                {
                                  "case": "orbis",
                                  "return": "ica"
                                },
                                {
                                  "case": "campaign",
                                  "return": "mission"
                                },
                                {
                                  "case": "sniper",
                                  "return": "sniperrifle"
                                },
                                {
                                  "default": {
                                    "$if $.Contract.Metadata.IsVersus": {
                                      "$then": "versus",
                                      "$else": "$.Contract.Metadata.Type"
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        }
                      }
                    ]
                  }
                ]
              },
              "set-mastery-data": {
                "$setup": {
                  "$set ValidContractType": {
                    "$if $isnull $.Contract": {
                      "$then": true,
                      "$else": {
                        "$switch $.Contract.Metadata.Type": [
                          {
                            "case": "usercreated",
                            "return": false
                          },
                          {
                            "case": "featured",
                            "return": false
                          },
                          {
                            "default": true
                          }
                        ]
                      }
                    }
                  },
                  "$set HideProgression": {
                    "$if $isnull $.CompletionData": {
                      "$then": "$.Data.LocationHideProgression",
                      "$else": "$.CompletionData.HideProgression"
                    }
                  },
                  "$set MasteryTitle": {
                    "$if $isnull $.CompletionData": {
                      "$then": "$formatstring {$.Data.LocationLevel,.0f}/{$.Data.LocationMaxLevel,.0f}",
                      "$else": "$formatstring {$.CompletionData.Level,.0f}/{$.CompletionData.MaxLevel,.0f}"
                    }
                  },
                  "$set MasteryCompletion": {
                    "$if $isnull $.CompletionData": {
                      "$then": "$.Data.LocationCompletion",
                      "$else": "$.CompletionData.Completion"
                    }
                  },
                  "$set MasteryXpLeft": {
                    "$if $isnull $.CompletionData": {
                      "$then": "$.Data.LocationXpLeft",
                      "$else": "$.CompletionData.XpLeft"
                    }
                  },
                  "$set NameLocalized": {
                    "$if $isnull $.CompletionData.Name": {
                      "$then": "$loc UI_MENU_PAGE_MASTERY_TITLE",
                      "$else": "$loc $.CompletionData.Name"
                    }
                  },
                  "$set IsLocationProgression": {
                    "$if": {
                      "$condition": {
                        "$or": [
                          "$isnull $.CompletionData",
                          "$.CompletionData.IsLocationProgression"
                        ]
                      },
                      "$then": true,
                      "$else": false
                    }
                  },
                  "$set ShowUnit": {
                    "$if $.IsLocationProgression": {
                      "$then": true,
                      "$else": false
                    }
                  },
                  "$in": {
                    "$if": {
                      "$condition": {
                        "$and": [
                          "$arg _isonline",
                          "$not $.HideProgression",
                          "$.ValidContractType"
                        ]
                      },
                      "$then": {
                        "masteryheader": "$.NameLocalized",
                        "masterytitle": "$.MasteryTitle",
                        "masterycompletion": "$.MasteryCompletion",
                        "masteryxpleft": "$.MasteryXpLeft",
                        "showUnit": "$.ShowUnit"
                      },
                      "$else": {}
                    }
                  }
                }
              }
            },
            "deselect": {
              "replace-children": {
                "target": "headline_container",
                "children": []
              },
              "set-mastery-data": {}
            },
            "action-y": {
              "$switch $.Contract.Metadata.Type": [
                {
                  "case": "usercreated",
                  "return": {
                    "$if $not $($arg _ugcrestricted)": {
                      "$then": {
                        "link": {
                          "page": "report",
                          "args": {
                            "url": "report",
                            "args": {
                              "contractid": "$.Contract.Metadata.Id"
                            },
                            "contractid": "$.Contract.Metadata.Id",
                            "contracttitle": "$.Contract.Metadata.Title"
                          }
                        }
                      }
                    }
                  }
                }
              ]
            },
            "action-x": {
              "$switch $.Contract.Metadata.Type": [
                {
                  "case": "usercreated",
                  "return": {
                    "$if $not $($arg _ugcrestricted)": {
                      "$then": {
                        "$if $eqs ($($arg HitsCategory),MyPlaylist)": {
                          "$then": {
                            "favrem:mark-for-playlist-removal": {
                              "contractId": "$.Contract.Metadata.Id",
                              "newActionLabels": {
                                "actiontype": "action-x",
                                "unmarklabel": "$loc UI_BUTTON_PROMPTS_ACTION_UNMARK_FOR_REMOVAL",
                                "marklabel": "$loc UI_BUTTON_PROMPTS_ACTION_MARK_FOR_REMOVAL"
                              }
                            }
                          },
                          "$else": {
                            "load-async": {
                              "from": {
                                "url": "$formatstring contractplaylist/addordelete/{$.Contract.Metadata.Id}"
                              },
                              "reloadTarget": true,
                              "target": "$formatstring {$.Contract.Metadata.Id}_contractTile",
                              "showloadingindicator": true,
                              "blocksinput": true,
                              "post-load-action": [
                                {
                                  "stateprovider-callback": {
                                    "callback-id": "reload-contract-tiles",
                                    "data": {
                                      "contract-id": "$.Contract.Metadata.Id",
                                      "reloadTarget": "$not $eqs ($($arg HitsCategory),MyPlaylist)"
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        }
                      }
                    }
                  }
                }
              ]
            }
          },
          {
            "$mergeobjects": [
              {
                "on-content-unknown": {
                  "_comment": "No DLC could be found containing contract",
                  "alter-actions": {
                    "path": "accept",
                    "value": {
                      "show-modal": {
                        "config": {
                          "view": "menu3.modal.ModalDialogGeneric",
                          "buttons": [
                            "$loc UI_DIALOG_OK"
                          ],
                          "data": {
                            "title": "$loc UI_CONTENT_UNKNOWN_DLC_TITLE",
                            "description": "$loc UI_CONTENT_UNKNOWN_DLC_TEXT"
                          }
                        },
                        "onbutton": []
                      }
                    }
                  }
                },
                "on-content-not-owned": {
                  "_comment": "DLC is not owned",
                  "alter-actions": {
                    "path": "accept",
                    "value": {
                      "$if": {
                        "$condition": {
                          "$and": [
                            "$timeexpired $.Contract.Metadata.PlayableUntil",
                            {
                              "$equal": [
                                "elusive",
                                "$.Contract.Metadata.Type"
                              ]
                            }
                          ]
                        },
                        "$then": {
                          "show-modal": {
                            "config": {
                              "buttons": [
                                "$loc UI_DIALOG_OK"
                              ],
                              "data": {
                                "title": "$loc UI_CONTRACT_HEADER_ELUSIVE",
                                "description": "$loc UI_DIALOG_SHOP_ELUSIVE_TARGET"
                              }
                            },
                            "onbutton": [
                              {
                                "show-modal": {
                                  "config": {
                                    "view": "menu3.modal.ModalDialogGeneric",
                                    "buttons": [
                                      {
                                        "label": {
                                          "$setup": {
                                            "$set Store": {
                                              "$switch $arg _platform": [
                                                {
                                                  "case": "pc",
                                                  "return": "UI_MENU_GO_TO_STORE"
                                                },
                                                {
                                                  "case": "orbis",
                                                  "return": "UI_MENU_GO_TO_STORE_PSN"
                                                },
                                                {
                                                  "case": "durango",
                                                  "return": "UI_MENU_GO_TO_STORE_XBOX"
                                                }
                                              ]
                                            },
                                            "$in": "$formatstring {$loc UI_MENU_PAGE_FEATURED_GOTO_HEADER} {$loc $.Store}"
                                          }
                                        },
                                        "icon": "arrowright"
                                      },
                                      {
                                        "label": "$loc UI_DIALOG_CANCEL",
                                        "type": "cancel"
                                      }
                                    ],
                                    "data": {
                                      "$setup": {
                                        "$set Title": "UI_DIALOG_CONTRACT_SEARCH_DLC_NOT_OWNED_TITLE",
                                        "$set Description": "UI_DIALOG_CONTRACT_SEARCH_DLC_NOT_OWNED_DESCRIPTION",
                                        "$in": {
                                          "title": "$loc $.Title",
                                          "frameheightmax": 850,
                                          "information": [
                                            {
                                              "$if $not $($isnull $.Contract)": {
                                                "$then": {
                                                  "contract": {
                                                    "type": "$.Contract.Metadata.Type",
                                                    "name": {
                                                      "$switch $.Contract.Metadata.Type": [
                                                        {
                                                          "case": "usercreated",
                                                          "return": {
                                                            "$if $($arg _ugcrestricted)": {
                                                              "$then": "$loc UI_CONTRACT_NO_ACCESS_UGC",
                                                              "$else": "$.Contract.Metadata.Title"
                                                            }
                                                          }
                                                        },
                                                        {
                                                          "case": "featured",
                                                          "return": "$.Contract.Metadata.Title"
                                                        },
                                                        {
                                                          "default": "$loc $.Contract.Metadata.Title"
                                                        }
                                                      ]
                                                    },
                                                    "creator": {
                                                      "$switch $.Contract.Metadata.Type": [
                                                        {
                                                          "case": "featured",
                                                          "return": "$loc UI_CATEGORY_MESSAGE_CENTER_COMMUNITY"
                                                        },
                                                        {
                                                          "default": "$($user $.Contract.Metadata.CreatorUserId).name"
                                                        }
                                                      ]
                                                    },
                                                    "id": "$formatpublicid $.Contract.Metadata.PublicId",
                                                    "creationdate": "$.Contract.Metadata.CreationTimestamp",
                                                    "description": {
                                                      "$switch $.Contract.Metadata.Type": [
                                                        {
                                                          "case": "featured",
                                                          "return": {
                                                            "$if $stringvalid $loc $.Contract.Metadata.Description": {
                                                              "$then": "$loc $.Contract.Metadata.Description",
                                                              "$else": "$.Contract.Metadata.Description"
                                                            }
                                                          }
                                                        },
                                                        {
                                                          "case": "creation",
                                                          "return": "$loc UI_MENU_PAGE_CREATE_CONTRACT_NO_ACCESS_DESCRIPTION"
                                                        },
                                                        {
                                                          "case": "elusive",
                                                          "return": "$loc UI_CONTRACT_HEADER_ELUSIVE"
                                                        },
                                                        {
                                                          "default": "$loc $.Contract.Metadata.Description"
                                                        }
                                                      ]
                                                    },
                                                    "image": {
                                                      "$if $.Contract.Metadata.TileImage": {
                                                        "$then": {
                                                          "$if $gt ($arraysize $.Contract.Metadata.TileImage,0)": {
                                                            "$then": {
                                                              "$setup": {
                                                                "$set EngineMode": {
                                                                  "$if $isnull $.EngineMode": {
                                                                    "$then": {
                                                                      "$if $isnull $arg EngineMode": {
                                                                        "$then": "singleplayer",
                                                                        "$else": "$arg EngineMode"
                                                                      }
                                                                    },
                                                                    "$else": "$.EngineMode"
                                                                  }
                                                                },
                                                                "$set TileImageOrdered": {
                                                                  "$orderby": {
                                                                    "from": "$expand $.Contract.Metadata.TileImage",
                                                                    "by": "Mode",
                                                                    "order": [
                                                                      "$.EngineMode"
                                                                    ]
                                                                  }
                                                                },
                                                                "$in": "$res $.TileImageOrdered[0].Image"
                                                              }
                                                            },
                                                            "$else": "$res $expand $.Contract.Metadata.TileImage"
                                                          }
                                                        },
                                                        "$else": "$res images/ui/tiles/defaultmenutilesmall.jpg"
                                                      }
                                                    },
                                                    "icon": {
                                                      "$switch $.Contract.Metadata.Type": [
                                                        {
                                                          "case": "dummy",
                                                          "return": {
                                                            "_dynamicPackerOverride": [
                                                              "SniperChallenge"
                                                            ]
                                                          }
                                                        },
                                                        {
                                                          "case": "orbis",
                                                          "return": "ica"
                                                        },
                                                        {
                                                          "case": "campaign",
                                                          "return": "mission"
                                                        },
                                                        {
                                                          "case": "sniper",
                                                          "return": "sniperrifle"
                                                        },
                                                        {
                                                          "default": {
                                                            "$if $.Contract.Metadata.IsVersus": {
                                                              "$then": "versus",
                                                              "$else": "$.Contract.Metadata.Type"
                                                            }
                                                          }
                                                        }
                                                      ]
                                                    },
                                                    "locked": true
                                                  }
                                                }
                                              }
                                            },
                                            {
                                              "dlcmissing": {
                                                "$setup": {
                                                  "$set DlcName": {
                                                    "$if $isnull $.DlcName": {
                                                      "$then": {
                                                        "$if $isnull $.SubLocation": {
                                                          "$then": {
                                                            "$if $isnull $.Location": {
                                                              "$then": "$loc $.Data.DlcName",
                                                              "$else": "$loc $.Location.Properties.DlcName"
                                                            }
                                                          },
                                                          "$else": "$loc $.SubLocation.Properties.DlcName"
                                                        }
                                                      },
                                                      "$else": "$.DlcName"
                                                    }
                                                  },
                                                  "$set DlcImage": {
                                                    "$if $isnull $.DlcImage": {
                                                      "$then": {
                                                        "$if $isnull $.SubLocation": {
                                                          "$then": {
                                                            "$if $isnull $.Location": {
                                                              "$then": "$res $.Data.DlcImage",
                                                              "$else": "$res $.Location.Properties.DlcImage"
                                                            }
                                                          },
                                                          "$else": "$res $.SubLocation.Properties.DlcImage"
                                                        }
                                                      },
                                                      "$else": "$.DlcImage"
                                                    }
                                                  },
                                                  "$set CreatedInMission": "$loc $formatstring UI_{$.Contract.Metadata.Location}_TITLE",
                                                  "$set CreatedInLocation": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                                                  "$in": {
                                                    "showcreatedin": {
                                                      "$switch $.Contract.Metadata.Type": [
                                                        {
                                                          "case": "featured",
                                                          "return": true
                                                        },
                                                        {
                                                          "case": "usercreated",
                                                          "return": true
                                                        },
                                                        {
                                                          "default": false
                                                        }
                                                      ]
                                                    },
                                                    "episode": "$.DlcName",
                                                    "location": {
                                                      "$loc": {
                                                        "key": "UI_DIALOG_CONTRACT_SEARCH_CREATED_IN",
                                                        "data": [
                                                          "$formatstring {$.CreatedInMission}, {$.CreatedInLocation}"
                                                        ]
                                                      }
                                                    },
                                                    "description": {
                                                      "$if $isnull $.DescriptionExpanded": {
                                                        "$then": {
                                                          "$loc": {
                                                            "key": "$.Description",
                                                            "data": [
                                                              "$.DlcName"
                                                            ]
                                                          }
                                                        },
                                                        "$else": "$.DescriptionExpanded"
                                                      }
                                                    },
                                                    "image": "$.DlcImage"
                                                  }
                                                }
                                              }
                                            }
                                          ],
                                          "userresolution": {
                                            "$if": {
                                              "$condition": {
                                                "$and": [
                                                  "$not $($isnull $.Contract)",
                                                  {
                                                    "$equal": [
                                                      "usercreated",
                                                      "$.Contract.Metadata.Type"
                                                    ]
                                                  }
                                                ]
                                              },
                                              "$then": {
                                                "informationtarget": "contract.creator",
                                                "profileid": "$.Contract.Metadata.CreatorUserId"
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onbutton": [
                                    {
                                      "$if $not $arg _isonline": {
                                        "$then": {
                                          "open-package-store": {
                                            "packageid": "$.packageid",
                                            "skipdialog": true
                                          }
                                        },
                                        "$else": {
                                          "show-store-item-detail": {
                                            "itemId": {
                                              "$setup": {
                                                "$set LocationId": {
                                                  "$if $isnull $.SubLocation": {
                                                    "$then": {
                                                      "$if $isnull $.Location": {
                                                        "$then": {
                                                          "$if $not $($isnull $.Contract)": {
                                                            "$then": "$.Contract.Metadata.Location",
                                                            "$else": null
                                                          }
                                                        },
                                                        "$else": "$.Location.Id"
                                                      }
                                                    },
                                                    "$else": "$.SubLocation.Id"
                                                  }
                                                },
                                                "$in": {
                                                  "$if": {
                                                    "$condition": {
                                                      "$or": [
                                                        "$eqs ($.LocationId,LOCATION_PARENT_PARIS)",
                                                        "$eqs ($.LocationId,LOCATION_PARIS)",
                                                        "$eqs ($.LocationId,LOCATION_PARENT_COASTALTOWN)",
                                                        "$eqs ($.LocationId,LOCATION_COASTALTOWN)",
                                                        "$eqs ($.LocationId,LOCATION_COASTALTOWN_NIGHT)",
                                                        "$eqs ($.LocationId,LOCATION_COASTALTOWN_MOVIESET)",
                                                        "$eqs ($.LocationId,LOCATION_PARENT_MARRAKECH)",
                                                        "$eqs ($.LocationId,LOCATION_MARRAKECH)",
                                                        "$eqs ($.LocationId,LOCATION_MARRAKECH_NIGHT)",
                                                        "$eqs ($.LocationId,LOCATION_PARENT_BANGKOK)",
                                                        "$eqs ($.LocationId,LOCATION_BANGKOK)",
                                                        "$eqs ($.LocationId,LOCATION_PARENT_COLORADO)",
                                                        "$eqs ($.LocationId,LOCATION_COLORADO)",
                                                        "$eqs ($.LocationId,LOCATION_PARENT_HOKKAIDO)",
                                                        "$eqs ($.LocationId,LOCATION_HOKKAIDO)",
                                                        "$eqs ($.LocationId,LOCATION_COASTALTOWN_EBOLA)",
                                                        "$eqs ($.LocationId,LOCATION_BANGKOK_ZIKA)",
                                                        "$eqs ($.LocationId,LOCATION_COLORADO_RABIES)",
                                                        "$eqs ($.LocationId,LOCATION_HOKKAIDO_FLU)"
                                                      ]
                                                    },
                                                    "$then": {
                                                      "$if": {
                                                        "$condition": {
                                                          "$and": [
                                                            "$not $isuser season2",
                                                            {
                                                              "$if": {
                                                                "$condition": {
                                                                  "$or": [
                                                                    "$eqs ($arg _platform,orbis)",
                                                                    "$eqs ($.Platform,orbis)"
                                                                  ]
                                                                },
                                                                "$then": true,
                                                                "$else": false
                                                              }
                                                            }
                                                          ]
                                                        },
                                                        "$then": {
                                                          "$setup": {
                                                            "$set Platform": {
                                                              "$if $isnull $.Platform": {
                                                                "$then": "$arg _platform",
                                                                "$else": "$.Platform"
                                                              }
                                                            },
                                                            "$set Region": {
                                                              "$if $isnull $.Region": {
                                                                "$then": "$arg _region",
                                                                "$else": "$.Region"
                                                              }
                                                            },
                                                            "$in": {
                                                              "$switch $.Platform": [
                                                                {
                                                                  "case": "pc",
                                                                  "return": "863550"
                                                                },
                                                                {
                                                                  "case": "orbis",
                                                                  "return": {
                                                                    "$switch $.Region": [
                                                                      {
                                                                        "case": "asia",
                                                                        "return": "STARTPACK0000000"
                                                                      },
                                                                      {
                                                                        "case": "jp",
                                                                        "return": "HITMANSTANDARD00"
                                                                      },
                                                                      {
                                                                        "default": "STARTPACK0000000"
                                                                      }
                                                                    ]
                                                                  }
                                                                },
                                                                {
                                                                  "case": "durango",
                                                                  "return": "dbbf8074-f8e5-48c6-8162-f4af3cdcdcb8"
                                                                }
                                                              ]
                                                            }
                                                          }
                                                        },
                                                        "$else": {
                                                          "$if": {
                                                            "$condition": {
                                                              "$or": [
                                                                "$isuser intropack",
                                                                "$isuser fullexperience"
                                                              ]
                                                            },
                                                            "$then": {
                                                              "$setup": {
                                                                "$set Platform": {
                                                                  "$if $isnull $.Platform": {
                                                                    "$then": "$arg _platform",
                                                                    "$else": "$.Platform"
                                                                  }
                                                                },
                                                                "$set Region": {
                                                                  "$if $isnull $.Region": {
                                                                    "$then": "$arg _region",
                                                                    "$else": "$.Region"
                                                                  }
                                                                },
                                                                "$in": {
                                                                  "$switch $.Platform": [
                                                                    {
                                                                      "case": "pc",
                                                                      "return": "960832"
                                                                    },
                                                                    {
                                                                      "case": "orbis",
                                                                      "return": {
                                                                        "$switch $.Region": [
                                                                          {
                                                                            "case": "asia",
                                                                            "return": "S1GOTYUPASIA0000"
                                                                          },
                                                                          {
                                                                            "case": "jp",
                                                                            "return": "S1GOTYUPASIA0000"
                                                                          },
                                                                          {
                                                                            "default": "S1GOTYUPGRADE000"
                                                                          }
                                                                        ]
                                                                      }
                                                                    },
                                                                    {
                                                                      "case": "durango",
                                                                      "return": "fdb4873a-b559-4cbd-addc-625f833de81b"
                                                                    }
                                                                  ]
                                                                }
                                                              }
                                                            },
                                                            "$else": {
                                                              "$setup": {
                                                                "$set Platform": {
                                                                  "$if $isnull $.Platform": {
                                                                    "$then": "$arg _platform",
                                                                    "$else": "$.Platform"
                                                                  }
                                                                },
                                                                "$set Region": {
                                                                  "$if $isnull $.Region": {
                                                                    "$then": "$arg _region",
                                                                    "$else": "$.Region"
                                                                  }
                                                                },
                                                                "$in": {
                                                                  "$switch $.Platform": [
                                                                    {
                                                                      "case": "pc",
                                                                      "return": "960831"
                                                                    },
                                                                    {
                                                                      "case": "orbis",
                                                                      "return": {
                                                                        "$switch $.Region": [
                                                                          {
                                                                            "case": "asia",
                                                                            "return": "S1GOTYASIA000000"
                                                                          },
                                                                          {
                                                                            "default": "S1GOTY0000000000"
                                                                          }
                                                                        ]
                                                                      }
                                                                    },
                                                                    {
                                                                      "case": "durango",
                                                                      "return": {
                                                                        "$if $isuser season2partial": {
                                                                          "$then": "a8b30989-98b0-484f-ada0-71dd5117ed58",
                                                                          "$else": "452917d6-f81e-435b-9da4-6891e22326a6"
                                                                        }
                                                                      }
                                                                    }
                                                                  ]
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    },
                                                    "$else": {
                                                      "$if": {
                                                        "$condition": {
                                                          "$or": [
                                                            "$eqs ($.LocationId,LOCATION_MIAMI_COTTONMOUTH)",
                                                            "$eqs ($.LocationId,LOCATION_COLOMBIA_ANACONDA)",
                                                            "$eqs ($.LocationId,LOCATION_MUMBAI_KINGCOBRA)",
                                                            "$eqs ($.LocationId,LOCATION_NORTHAMERICA_GARTERSNAKE)",
                                                            "$eqs ($.LocationId,LOCATION_PARENT_SALTY)",
                                                            "$eqs ($.LocationId,LOCATION_SALTY_SEAGULL)",
                                                            "$eqs ($.LocationId,LOCATION_PARENT_CAGED)",
                                                            "$eqs ($.LocationId,LOCATION_CAGED_FALCON)",
                                                            "$eqs ($.LocationId,LOCATION_PARENT_GREEDY)",
                                                            "$eqs ($.LocationId,LOCATION_GREEDY_RACCOON)",
                                                            "$eqs ($.LocationId,LOCATION_PARENT_OPULENT)",
                                                            "$eqs ($.LocationId,LOCATION_OPULENT_STINGRAY)"
                                                          ]
                                                        },
                                                        "$then": {
                                                          "$if": {
                                                            "$condition": {
                                                              "$and": [
                                                                "$not $isuser season2",
                                                                {
                                                                  "$if": {
                                                                    "$condition": {
                                                                      "$or": [
                                                                        "$eqs ($arg _platform,orbis)",
                                                                        "$eqs ($.Platform,orbis)"
                                                                      ]
                                                                    },
                                                                    "$then": true,
                                                                    "$else": false
                                                                  }
                                                                }
                                                              ]
                                                            },
                                                            "$then": {
                                                              "$setup": {
                                                                "$set Platform": {
                                                                  "$if $isnull $.Platform": {
                                                                    "$then": "$arg _platform",
                                                                    "$else": "$.Platform"
                                                                  }
                                                                },
                                                                "$set Region": {
                                                                  "$if $isnull $.Region": {
                                                                    "$then": "$arg _region",
                                                                    "$else": "$.Region"
                                                                  }
                                                                },
                                                                "$in": {
                                                                  "$switch $.Platform": [
                                                                    {
                                                                      "case": "pc",
                                                                      "return": "863550"
                                                                    },
                                                                    {
                                                                      "case": "orbis",
                                                                      "return": {
                                                                        "$switch $.Region": [
                                                                          {
                                                                            "case": "asia",
                                                                            "return": "STARTPACK0000000"
                                                                          },
                                                                          {
                                                                            "case": "jp",
                                                                            "return": "HITMANSTANDARD00"
                                                                          },
                                                                          {
                                                                            "default": "STARTPACK0000000"
                                                                          }
                                                                        ]
                                                                      }
                                                                    },
                                                                    {
                                                                      "case": "durango",
                                                                      "return": "dbbf8074-f8e5-48c6-8162-f4af3cdcdcb8"
                                                                    }
                                                                  ]
                                                                }
                                                              }
                                                            },
                                                            "$else": {
                                                              "$setup": {
                                                                "$set Platform": {
                                                                  "$if $isnull $.Platform": {
                                                                    "$then": "$arg _platform",
                                                                    "$else": "$.Platform"
                                                                  }
                                                                },
                                                                "$set Region": {
                                                                  "$if $isnull $.Region": {
                                                                    "$then": "$arg _region",
                                                                    "$else": "$.Region"
                                                                  }
                                                                },
                                                                "$in": {
                                                                  "$switch $.Platform": [
                                                                    {
                                                                      "case": "pc",
                                                                      "return": "863550"
                                                                    },
                                                                    {
                                                                      "case": "orbis",
                                                                      "return": "0000SEASONPASSH2"
                                                                    },
                                                                    {
                                                                      "case": "durango",
                                                                      "return": "6c057b75-e77b-4438-879e-6d563da92f32"
                                                                    }
                                                                  ]
                                                                }
                                                              }
                                                            }
                                                          }
                                                        },
                                                        "$else": {
                                                          "$setup": {
                                                            "$set Platform": {
                                                              "$if $isnull $.Platform": {
                                                                "$then": "$arg _platform",
                                                                "$else": "$.Platform"
                                                              }
                                                            },
                                                            "$set Region": {
                                                              "$if $isnull $.Region": {
                                                                "$then": "$arg _region",
                                                                "$else": "$.Region"
                                                              }
                                                            },
                                                            "$in": {
                                                              "$switch $.Platform": [
                                                                {
                                                                  "case": "pc",
                                                                  "return": "863550"
                                                                },
                                                                {
                                                                  "case": "orbis",
                                                                  "return": {
                                                                    "$switch $.Region": [
                                                                      {
                                                                        "case": "asia",
                                                                        "return": "STARTPACK0000000"
                                                                      },
                                                                      {
                                                                        "case": "jp",
                                                                        "return": "HITMANSTANDARD00"
                                                                      },
                                                                      {
                                                                        "default": "STARTPACK0000000"
                                                                      }
                                                                    ]
                                                                  }
                                                                },
                                                                {
                                                                  "case": "durango",
                                                                  "return": "dbbf8074-f8e5-48c6-8162-f4af3cdcdcb8"
                                                                }
                                                              ]
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            ]
                          }
                        },
                        "$else": {
                          "show-modal": {
                            "config": {
                              "view": "menu3.modal.ModalDialogGeneric",
                              "buttons": [
                                {
                                  "label": {
                                    "$setup": {
                                      "$set Store": {
                                        "$switch $arg _platform": [
                                          {
                                            "case": "pc",
                                            "return": "UI_MENU_GO_TO_STORE"
                                          },
                                          {
                                            "case": "orbis",
                                            "return": "UI_MENU_GO_TO_STORE_PSN"
                                          },
                                          {
                                            "case": "durango",
                                            "return": "UI_MENU_GO_TO_STORE_XBOX"
                                          }
                                        ]
                                      },
                                      "$in": "$formatstring {$loc UI_MENU_PAGE_FEATURED_GOTO_HEADER} {$loc $.Store}"
                                    }
                                  },
                                  "icon": "arrowright"
                                },
                                {
                                  "label": "$loc UI_DIALOG_CANCEL",
                                  "type": "cancel"
                                }
                              ],
                              "data": {
                                "$setup": {
                                  "$set Title": "UI_DIALOG_CONTRACT_SEARCH_DLC_NOT_OWNED_TITLE",
                                  "$set Description": "UI_DIALOG_CONTRACT_SEARCH_DLC_NOT_OWNED_DESCRIPTION",
                                  "$in": {
                                    "title": "$loc $.Title",
                                    "frameheightmax": 850,
                                    "information": [
                                      {
                                        "$if $not $($isnull $.Contract)": {
                                          "$then": {
                                            "contract": {
                                              "type": "$.Contract.Metadata.Type",
                                              "name": {
                                                "$switch $.Contract.Metadata.Type": [
                                                  {
                                                    "case": "usercreated",
                                                    "return": {
                                                      "$if $($arg _ugcrestricted)": {
                                                        "$then": "$loc UI_CONTRACT_NO_ACCESS_UGC",
                                                        "$else": "$.Contract.Metadata.Title"
                                                      }
                                                    }
                                                  },
                                                  {
                                                    "case": "featured",
                                                    "return": "$.Contract.Metadata.Title"
                                                  },
                                                  {
                                                    "default": "$loc $.Contract.Metadata.Title"
                                                  }
                                                ]
                                              },
                                              "creator": {
                                                "$switch $.Contract.Metadata.Type": [
                                                  {
                                                    "case": "featured",
                                                    "return": "$loc UI_CATEGORY_MESSAGE_CENTER_COMMUNITY"
                                                  },
                                                  {
                                                    "default": "$($user $.Contract.Metadata.CreatorUserId).name"
                                                  }
                                                ]
                                              },
                                              "id": "$formatpublicid $.Contract.Metadata.PublicId",
                                              "creationdate": "$.Contract.Metadata.CreationTimestamp",
                                              "description": {
                                                "$switch $.Contract.Metadata.Type": [
                                                  {
                                                    "case": "featured",
                                                    "return": {
                                                      "$if $stringvalid $loc $.Contract.Metadata.Description": {
                                                        "$then": "$loc $.Contract.Metadata.Description",
                                                        "$else": "$.Contract.Metadata.Description"
                                                      }
                                                    }
                                                  },
                                                  {
                                                    "case": "creation",
                                                    "return": "$loc UI_MENU_PAGE_CREATE_CONTRACT_NO_ACCESS_DESCRIPTION"
                                                  },
                                                  {
                                                    "case": "elusive",
                                                    "return": "$loc UI_CONTRACT_HEADER_ELUSIVE"
                                                  },
                                                  {
                                                    "default": "$loc $.Contract.Metadata.Description"
                                                  }
                                                ]
                                              },
                                              "image": {
                                                "$if $.Contract.Metadata.TileImage": {
                                                  "$then": {
                                                    "$if $gt ($arraysize $.Contract.Metadata.TileImage,0)": {
                                                      "$then": {
                                                        "$setup": {
                                                          "$set EngineMode": {
                                                            "$if $isnull $.EngineMode": {
                                                              "$then": {
                                                                "$if $isnull $arg EngineMode": {
                                                                  "$then": "singleplayer",
                                                                  "$else": "$arg EngineMode"
                                                                }
                                                              },
                                                              "$else": "$.EngineMode"
                                                            }
                                                          },
                                                          "$set TileImageOrdered": {
                                                            "$orderby": {
                                                              "from": "$expand $.Contract.Metadata.TileImage",
                                                              "by": "Mode",
                                                              "order": [
                                                                "$.EngineMode"
                                                              ]
                                                            }
                                                          },
                                                          "$in": "$res $.TileImageOrdered[0].Image"
                                                        }
                                                      },
                                                      "$else": "$res $expand $.Contract.Metadata.TileImage"
                                                    }
                                                  },
                                                  "$else": "$res images/ui/tiles/defaultmenutilesmall.jpg"
                                                }
                                              },
                                              "icon": {
                                                "$switch $.Contract.Metadata.Type": [
                                                  {
                                                    "case": "dummy",
                                                    "return": {
                                                      "_dynamicPackerOverride": [
                                                        "SniperChallenge"
                                                      ]
                                                    }
                                                  },
                                                  {
                                                    "case": "orbis",
                                                    "return": "ica"
                                                  },
                                                  {
                                                    "case": "campaign",
                                                    "return": "mission"
                                                  },
                                                  {
                                                    "case": "sniper",
                                                    "return": "sniperrifle"
                                                  },
                                                  {
                                                    "default": {
                                                      "$if $.Contract.Metadata.IsVersus": {
                                                        "$then": "versus",
                                                        "$else": "$.Contract.Metadata.Type"
                                                      }
                                                    }
                                                  }
                                                ]
                                              },
                                              "locked": true
                                            }
                                          }
                                        }
                                      },
                                      {
                                        "dlcmissing": {
                                          "$setup": {
                                            "$set DlcName": {
                                              "$if $isnull $.DlcName": {
                                                "$then": {
                                                  "$if $isnull $.SubLocation": {
                                                    "$then": {
                                                      "$if $isnull $.Location": {
                                                        "$then": "$loc $.Data.DlcName",
                                                        "$else": "$loc $.Location.Properties.DlcName"
                                                      }
                                                    },
                                                    "$else": "$loc $.SubLocation.Properties.DlcName"
                                                  }
                                                },
                                                "$else": "$.DlcName"
                                              }
                                            },
                                            "$set DlcImage": {
                                              "$if $isnull $.DlcImage": {
                                                "$then": {
                                                  "$if $isnull $.SubLocation": {
                                                    "$then": {
                                                      "$if $isnull $.Location": {
                                                        "$then": "$res $.Data.DlcImage",
                                                        "$else": "$res $.Location.Properties.DlcImage"
                                                      }
                                                    },
                                                    "$else": "$res $.SubLocation.Properties.DlcImage"
                                                  }
                                                },
                                                "$else": "$.DlcImage"
                                              }
                                            },
                                            "$set CreatedInMission": "$loc $formatstring UI_{$.Contract.Metadata.Location}_TITLE",
                                            "$set CreatedInLocation": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                                            "$in": {
                                              "showcreatedin": {
                                                "$switch $.Contract.Metadata.Type": [
                                                  {
                                                    "case": "featured",
                                                    "return": true
                                                  },
                                                  {
                                                    "case": "usercreated",
                                                    "return": true
                                                  },
                                                  {
                                                    "default": false
                                                  }
                                                ]
                                              },
                                              "episode": "$.DlcName",
                                              "location": {
                                                "$loc": {
                                                  "key": "UI_DIALOG_CONTRACT_SEARCH_CREATED_IN",
                                                  "data": [
                                                    "$formatstring {$.CreatedInMission}, {$.CreatedInLocation}"
                                                  ]
                                                }
                                              },
                                              "description": {
                                                "$if $isnull $.DescriptionExpanded": {
                                                  "$then": {
                                                    "$loc": {
                                                      "key": "$.Description",
                                                      "data": [
                                                        "$.DlcName"
                                                      ]
                                                    }
                                                  },
                                                  "$else": "$.DescriptionExpanded"
                                                }
                                              },
                                              "image": "$.DlcImage"
                                            }
                                          }
                                        }
                                      }
                                    ],
                                    "userresolution": {
                                      "$if": {
                                        "$condition": {
                                          "$and": [
                                            "$not $($isnull $.Contract)",
                                            {
                                              "$equal": [
                                                "usercreated",
                                                "$.Contract.Metadata.Type"
                                              ]
                                            }
                                          ]
                                        },
                                        "$then": {
                                          "informationtarget": "contract.creator",
                                          "profileid": "$.Contract.Metadata.CreatorUserId"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "onbutton": [
                              {
                                "$if $not $arg _isonline": {
                                  "$then": {
                                    "open-package-store": {
                                      "packageid": "$.packageid",
                                      "skipdialog": true
                                    }
                                  },
                                  "$else": {
                                    "show-store-item-detail": {
                                      "itemId": {
                                        "$setup": {
                                          "$set LocationId": {
                                            "$if $isnull $.SubLocation": {
                                              "$then": {
                                                "$if $isnull $.Location": {
                                                  "$then": {
                                                    "$if $not $($isnull $.Contract)": {
                                                      "$then": "$.Contract.Metadata.Location",
                                                      "$else": null
                                                    }
                                                  },
                                                  "$else": "$.Location.Id"
                                                }
                                              },
                                              "$else": "$.SubLocation.Id"
                                            }
                                          },
                                          "$in": {
                                            "$if": {
                                              "$condition": {
                                                "$or": [
                                                  "$eqs ($.LocationId,LOCATION_PARENT_PARIS)",
                                                  "$eqs ($.LocationId,LOCATION_PARIS)",
                                                  "$eqs ($.LocationId,LOCATION_PARENT_COASTALTOWN)",
                                                  "$eqs ($.LocationId,LOCATION_COASTALTOWN)",
                                                  "$eqs ($.LocationId,LOCATION_COASTALTOWN_NIGHT)",
                                                  "$eqs ($.LocationId,LOCATION_COASTALTOWN_MOVIESET)",
                                                  "$eqs ($.LocationId,LOCATION_PARENT_MARRAKECH)",
                                                  "$eqs ($.LocationId,LOCATION_MARRAKECH)",
                                                  "$eqs ($.LocationId,LOCATION_MARRAKECH_NIGHT)",
                                                  "$eqs ($.LocationId,LOCATION_PARENT_BANGKOK)",
                                                  "$eqs ($.LocationId,LOCATION_BANGKOK)",
                                                  "$eqs ($.LocationId,LOCATION_PARENT_COLORADO)",
                                                  "$eqs ($.LocationId,LOCATION_COLORADO)",
                                                  "$eqs ($.LocationId,LOCATION_PARENT_HOKKAIDO)",
                                                  "$eqs ($.LocationId,LOCATION_HOKKAIDO)",
                                                  "$eqs ($.LocationId,LOCATION_COASTALTOWN_EBOLA)",
                                                  "$eqs ($.LocationId,LOCATION_BANGKOK_ZIKA)",
                                                  "$eqs ($.LocationId,LOCATION_COLORADO_RABIES)",
                                                  "$eqs ($.LocationId,LOCATION_HOKKAIDO_FLU)"
                                                ]
                                              },
                                              "$then": {
                                                "$if": {
                                                  "$condition": {
                                                    "$and": [
                                                      "$not $isuser season2",
                                                      {
                                                        "$if": {
                                                          "$condition": {
                                                            "$or": [
                                                              "$eqs ($arg _platform,orbis)",
                                                              "$eqs ($.Platform,orbis)"
                                                            ]
                                                          },
                                                          "$then": true,
                                                          "$else": false
                                                        }
                                                      }
                                                    ]
                                                  },
                                                  "$then": {
                                                    "$setup": {
                                                      "$set Platform": {
                                                        "$if $isnull $.Platform": {
                                                          "$then": "$arg _platform",
                                                          "$else": "$.Platform"
                                                        }
                                                      },
                                                      "$set Region": {
                                                        "$if $isnull $.Region": {
                                                          "$then": "$arg _region",
                                                          "$else": "$.Region"
                                                        }
                                                      },
                                                      "$in": {
                                                        "$switch $.Platform": [
                                                          {
                                                            "case": "pc",
                                                            "return": "863550"
                                                          },
                                                          {
                                                            "case": "orbis",
                                                            "return": {
                                                              "$switch $.Region": [
                                                                {
                                                                  "case": "asia",
                                                                  "return": "STARTPACK0000000"
                                                                },
                                                                {
                                                                  "case": "jp",
                                                                  "return": "HITMANSTANDARD00"
                                                                },
                                                                {
                                                                  "default": "STARTPACK0000000"
                                                                }
                                                              ]
                                                            }
                                                          },
                                                          {
                                                            "case": "durango",
                                                            "return": "dbbf8074-f8e5-48c6-8162-f4af3cdcdcb8"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  },
                                                  "$else": {
                                                    "$if": {
                                                      "$condition": {
                                                        "$or": [
                                                          "$isuser intropack",
                                                          "$isuser fullexperience"
                                                        ]
                                                      },
                                                      "$then": {
                                                        "$setup": {
                                                          "$set Platform": {
                                                            "$if $isnull $.Platform": {
                                                              "$then": "$arg _platform",
                                                              "$else": "$.Platform"
                                                            }
                                                          },
                                                          "$set Region": {
                                                            "$if $isnull $.Region": {
                                                              "$then": "$arg _region",
                                                              "$else": "$.Region"
                                                            }
                                                          },
                                                          "$in": {
                                                            "$switch $.Platform": [
                                                              {
                                                                "case": "pc",
                                                                "return": "960832"
                                                              },
                                                              {
                                                                "case": "orbis",
                                                                "return": {
                                                                  "$switch $.Region": [
                                                                    {
                                                                      "case": "asia",
                                                                      "return": "S1GOTYUPASIA0000"
                                                                    },
                                                                    {
                                                                      "case": "jp",
                                                                      "return": "S1GOTYUPASIA0000"
                                                                    },
                                                                    {
                                                                      "default": "S1GOTYUPGRADE000"
                                                                    }
                                                                  ]
                                                                }
                                                              },
                                                              {
                                                                "case": "durango",
                                                                "return": "fdb4873a-b559-4cbd-addc-625f833de81b"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      },
                                                      "$else": {
                                                        "$setup": {
                                                          "$set Platform": {
                                                            "$if $isnull $.Platform": {
                                                              "$then": "$arg _platform",
                                                              "$else": "$.Platform"
                                                            }
                                                          },
                                                          "$set Region": {
                                                            "$if $isnull $.Region": {
                                                              "$then": "$arg _region",
                                                              "$else": "$.Region"
                                                            }
                                                          },
                                                          "$in": {
                                                            "$switch $.Platform": [
                                                              {
                                                                "case": "pc",
                                                                "return": "960831"
                                                              },
                                                              {
                                                                "case": "orbis",
                                                                "return": {
                                                                  "$switch $.Region": [
                                                                    {
                                                                      "case": "asia",
                                                                      "return": "S1GOTYASIA000000"
                                                                    },
                                                                    {
                                                                      "default": "S1GOTY0000000000"
                                                                    }
                                                                  ]
                                                                }
                                                              },
                                                              {
                                                                "case": "durango",
                                                                "return": {
                                                                  "$if $isuser season2partial": {
                                                                    "$then": "a8b30989-98b0-484f-ada0-71dd5117ed58",
                                                                    "$else": "452917d6-f81e-435b-9da4-6891e22326a6"
                                                                  }
                                                                }
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              },
                                              "$else": {
                                                "$if": {
                                                  "$condition": {
                                                    "$or": [
                                                      "$eqs ($.LocationId,LOCATION_MIAMI_COTTONMOUTH)",
                                                      "$eqs ($.LocationId,LOCATION_COLOMBIA_ANACONDA)",
                                                      "$eqs ($.LocationId,LOCATION_MUMBAI_KINGCOBRA)",
                                                      "$eqs ($.LocationId,LOCATION_NORTHAMERICA_GARTERSNAKE)",
                                                      "$eqs ($.LocationId,LOCATION_PARENT_SALTY)",
                                                      "$eqs ($.LocationId,LOCATION_SALTY_SEAGULL)",
                                                      "$eqs ($.LocationId,LOCATION_PARENT_CAGED)",
                                                      "$eqs ($.LocationId,LOCATION_CAGED_FALCON)",
                                                      "$eqs ($.LocationId,LOCATION_PARENT_GREEDY)",
                                                      "$eqs ($.LocationId,LOCATION_GREEDY_RACCOON)",
                                                      "$eqs ($.LocationId,LOCATION_PARENT_OPULENT)",
                                                      "$eqs ($.LocationId,LOCATION_OPULENT_STINGRAY)"
                                                    ]
                                                  },
                                                  "$then": {
                                                    "$if": {
                                                      "$condition": {
                                                        "$and": [
                                                          "$not $isuser season2",
                                                          {
                                                            "$if": {
                                                              "$condition": {
                                                                "$or": [
                                                                  "$eqs ($arg _platform,orbis)",
                                                                  "$eqs ($.Platform,orbis)"
                                                                ]
                                                              },
                                                              "$then": true,
                                                              "$else": false
                                                            }
                                                          }
                                                        ]
                                                      },
                                                      "$then": {
                                                        "$setup": {
                                                          "$set Platform": {
                                                            "$if $isnull $.Platform": {
                                                              "$then": "$arg _platform",
                                                              "$else": "$.Platform"
                                                            }
                                                          },
                                                          "$set Region": {
                                                            "$if $isnull $.Region": {
                                                              "$then": "$arg _region",
                                                              "$else": "$.Region"
                                                            }
                                                          },
                                                          "$in": {
                                                            "$switch $.Platform": [
                                                              {
                                                                "case": "pc",
                                                                "return": "863550"
                                                              },
                                                              {
                                                                "case": "orbis",
                                                                "return": {
                                                                  "$switch $.Region": [
                                                                    {
                                                                      "case": "asia",
                                                                      "return": "STARTPACK0000000"
                                                                    },
                                                                    {
                                                                      "case": "jp",
                                                                      "return": "HITMANSTANDARD00"
                                                                    },
                                                                    {
                                                                      "default": "STARTPACK0000000"
                                                                    }
                                                                  ]
                                                                }
                                                              },
                                                              {
                                                                "case": "durango",
                                                                "return": "dbbf8074-f8e5-48c6-8162-f4af3cdcdcb8"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      },
                                                      "$else": {
                                                        "$setup": {
                                                          "$set Platform": {
                                                            "$if $isnull $.Platform": {
                                                              "$then": "$arg _platform",
                                                              "$else": "$.Platform"
                                                            }
                                                          },
                                                          "$set Region": {
                                                            "$if $isnull $.Region": {
                                                              "$then": "$arg _region",
                                                              "$else": "$.Region"
                                                            }
                                                          },
                                                          "$in": {
                                                            "$switch $.Platform": [
                                                              {
                                                                "case": "pc",
                                                                "return": "863550"
                                                              },
                                                              {
                                                                "case": "orbis",
                                                                "return": "0000SEASONPASSH2"
                                                              },
                                                              {
                                                                "case": "durango",
                                                                "return": "6c057b75-e77b-4438-879e-6d563da92f32"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    }
                                                  },
                                                  "$else": {
                                                    "$setup": {
                                                      "$set Platform": {
                                                        "$if $isnull $.Platform": {
                                                          "$then": "$arg _platform",
                                                          "$else": "$.Platform"
                                                        }
                                                      },
                                                      "$set Region": {
                                                        "$if $isnull $.Region": {
                                                          "$then": "$arg _region",
                                                          "$else": "$.Region"
                                                        }
                                                      },
                                                      "$in": {
                                                        "$switch $.Platform": [
                                                          {
                                                            "case": "pc",
                                                            "return": "863550"
                                                          },
                                                          {
                                                            "case": "orbis",
                                                            "return": {
                                                              "$switch $.Region": [
                                                                {
                                                                  "case": "asia",
                                                                  "return": "STARTPACK0000000"
                                                                },
                                                                {
                                                                  "case": "jp",
                                                                  "return": "HITMANSTANDARD00"
                                                                },
                                                                {
                                                                  "default": "STARTPACK0000000"
                                                                }
                                                              ]
                                                            }
                                                          },
                                                          {
                                                            "case": "durango",
                                                            "return": "dbbf8074-f8e5-48c6-8162-f4af3cdcdcb8"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        }
                      }
                    }
                  }
                },
                "on-content-not-installed": {
                  "_comment": "DLC owned but not installed",
                  "alter-actions": {
                    "path": "accept",
                    "value": {
                      "$if": {
                        "$condition": {
                          "$and": [
                            "$timeexpired $.Contract.Metadata.PlayableUntil",
                            {
                              "$equal": [
                                "elusive",
                                "$.Contract.Metadata.Type"
                              ]
                            }
                          ]
                        },
                        "$then": {
                          "show-modal": {
                            "config": {
                              "buttons": [
                                "$loc UI_DIALOG_OK"
                              ],
                              "data": {
                                "title": "$loc UI_CONTRACT_HEADER_ELUSIVE",
                                "description": "$loc UI_DIALOG_SHOP_ELUSIVE_TARGET_DOWNLOAD"
                              }
                            },
                            "onbutton": [
                              {
                                "show-modal": {
                                  "config": {
                                    "view": "menu3.modal.ModalDialogGeneric",
                                    "buttons": [
                                      {
                                        "label": {
                                          "$setup": {
                                            "$set Store": {
                                              "$switch $arg _platform": [
                                                {
                                                  "case": "pc",
                                                  "return": "UI_MENU_GO_TO_STORE"
                                                },
                                                {
                                                  "case": "orbis",
                                                  "return": "UI_MENU_GO_TO_STORE_PSN"
                                                },
                                                {
                                                  "case": "durango",
                                                  "return": "UI_MENU_GO_TO_STORE_XBOX"
                                                }
                                              ]
                                            },
                                            "$in": "$formatstring {$loc UI_MENU_PAGE_FEATURED_GOTO_HEADER} {$loc $.Store}"
                                          }
                                        },
                                        "icon": "arrowright"
                                      },
                                      {
                                        "label": "$loc UI_DIALOG_CANCEL",
                                        "type": "cancel"
                                      }
                                    ],
                                    "data": {
                                      "$setup": {
                                        "$set Title": "UI_DIALOG_CONTRACT_SEARCH_DLC_NOT_INSTALLED_TITLE",
                                        "_comment": "using the NOT_OWNED string here as well is intentional",
                                        "$set Description": "UI_DIALOG_CONTRACT_SEARCH_DLC_NOT_INSTALLED_DESCRIPTION",
                                        "$in": {
                                          "title": "$loc $.Title",
                                          "frameheightmax": 850,
                                          "information": [
                                            {
                                              "$if $not $($isnull $.Contract)": {
                                                "$then": {
                                                  "contract": {
                                                    "type": "$.Contract.Metadata.Type",
                                                    "name": {
                                                      "$switch $.Contract.Metadata.Type": [
                                                        {
                                                          "case": "usercreated",
                                                          "return": {
                                                            "$if $($arg _ugcrestricted)": {
                                                              "$then": "$loc UI_CONTRACT_NO_ACCESS_UGC",
                                                              "$else": "$.Contract.Metadata.Title"
                                                            }
                                                          }
                                                        },
                                                        {
                                                          "case": "featured",
                                                          "return": "$.Contract.Metadata.Title"
                                                        },
                                                        {
                                                          "default": "$loc $.Contract.Metadata.Title"
                                                        }
                                                      ]
                                                    },
                                                    "creator": {
                                                      "$switch $.Contract.Metadata.Type": [
                                                        {
                                                          "case": "featured",
                                                          "return": "$loc UI_CATEGORY_MESSAGE_CENTER_COMMUNITY"
                                                        },
                                                        {
                                                          "default": "$($user $.Contract.Metadata.CreatorUserId).name"
                                                        }
                                                      ]
                                                    },
                                                    "id": "$formatpublicid $.Contract.Metadata.PublicId",
                                                    "creationdate": "$.Contract.Metadata.CreationTimestamp",
                                                    "description": {
                                                      "$switch $.Contract.Metadata.Type": [
                                                        {
                                                          "case": "featured",
                                                          "return": {
                                                            "$if $stringvalid $loc $.Contract.Metadata.Description": {
                                                              "$then": "$loc $.Contract.Metadata.Description",
                                                              "$else": "$.Contract.Metadata.Description"
                                                            }
                                                          }
                                                        },
                                                        {
                                                          "case": "creation",
                                                          "return": "$loc UI_MENU_PAGE_CREATE_CONTRACT_NO_ACCESS_DESCRIPTION"
                                                        },
                                                        {
                                                          "case": "elusive",
                                                          "return": "$loc UI_CONTRACT_HEADER_ELUSIVE"
                                                        },
                                                        {
                                                          "default": "$loc $.Contract.Metadata.Description"
                                                        }
                                                      ]
                                                    },
                                                    "image": {
                                                      "$if $.Contract.Metadata.TileImage": {
                                                        "$then": {
                                                          "$if $gt ($arraysize $.Contract.Metadata.TileImage,0)": {
                                                            "$then": {
                                                              "$setup": {
                                                                "$set EngineMode": {
                                                                  "$if $isnull $.EngineMode": {
                                                                    "$then": {
                                                                      "$if $isnull $arg EngineMode": {
                                                                        "$then": "singleplayer",
                                                                        "$else": "$arg EngineMode"
                                                                      }
                                                                    },
                                                                    "$else": "$.EngineMode"
                                                                  }
                                                                },
                                                                "$set TileImageOrdered": {
                                                                  "$orderby": {
                                                                    "from": "$expand $.Contract.Metadata.TileImage",
                                                                    "by": "Mode",
                                                                    "order": [
                                                                      "$.EngineMode"
                                                                    ]
                                                                  }
                                                                },
                                                                "$in": "$res $.TileImageOrdered[0].Image"
                                                              }
                                                            },
                                                            "$else": "$res $expand $.Contract.Metadata.TileImage"
                                                          }
                                                        },
                                                        "$else": "$res images/ui/tiles/defaultmenutilesmall.jpg"
                                                      }
                                                    },
                                                    "icon": {
                                                      "$switch $.Contract.Metadata.Type": [
                                                        {
                                                          "case": "dummy",
                                                          "return": {
                                                            "_dynamicPackerOverride": [
                                                              "SniperChallenge"
                                                            ]
                                                          }
                                                        },
                                                        {
                                                          "case": "orbis",
                                                          "return": "ica"
                                                        },
                                                        {
                                                          "case": "campaign",
                                                          "return": "mission"
                                                        },
                                                        {
                                                          "case": "sniper",
                                                          "return": "sniperrifle"
                                                        },
                                                        {
                                                          "default": {
                                                            "$if $.Contract.Metadata.IsVersus": {
                                                              "$then": "versus",
                                                              "$else": "$.Contract.Metadata.Type"
                                                            }
                                                          }
                                                        }
                                                      ]
                                                    },
                                                    "locked": true
                                                  }
                                                }
                                              }
                                            },
                                            {
                                              "dlcmissing": {
                                                "$setup": {
                                                  "$set DlcName": {
                                                    "$if $isnull $.DlcName": {
                                                      "$then": {
                                                        "$if $isnull $.SubLocation": {
                                                          "$then": {
                                                            "$if $isnull $.Location": {
                                                              "$then": "$loc $.Data.DlcName",
                                                              "$else": "$loc $.Location.Properties.DlcName"
                                                            }
                                                          },
                                                          "$else": "$loc $.SubLocation.Properties.DlcName"
                                                        }
                                                      },
                                                      "$else": "$.DlcName"
                                                    }
                                                  },
                                                  "$set DlcImage": {
                                                    "$if $isnull $.DlcImage": {
                                                      "$then": {
                                                        "$if $isnull $.SubLocation": {
                                                          "$then": {
                                                            "$if $isnull $.Location": {
                                                              "$then": "$res $.Data.DlcImage",
                                                              "$else": "$res $.Location.Properties.DlcImage"
                                                            }
                                                          },
                                                          "$else": "$res $.SubLocation.Properties.DlcImage"
                                                        }
                                                      },
                                                      "$else": "$.DlcImage"
                                                    }
                                                  },
                                                  "$set CreatedInMission": "$loc $formatstring UI_{$.Contract.Metadata.Location}_TITLE",
                                                  "$set CreatedInLocation": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                                                  "$in": {
                                                    "showcreatedin": {
                                                      "$switch $.Contract.Metadata.Type": [
                                                        {
                                                          "case": "featured",
                                                          "return": true
                                                        },
                                                        {
                                                          "case": "usercreated",
                                                          "return": true
                                                        },
                                                        {
                                                          "default": false
                                                        }
                                                      ]
                                                    },
                                                    "episode": "$.DlcName",
                                                    "location": {
                                                      "$loc": {
                                                        "key": "UI_DIALOG_CONTRACT_SEARCH_CREATED_IN",
                                                        "data": [
                                                          "$formatstring {$.CreatedInMission}, {$.CreatedInLocation}"
                                                        ]
                                                      }
                                                    },
                                                    "description": {
                                                      "$if $isnull $.DescriptionExpanded": {
                                                        "$then": {
                                                          "$loc": {
                                                            "key": "$.Description",
                                                            "data": [
                                                              "$.DlcName"
                                                            ]
                                                          }
                                                        },
                                                        "$else": "$.DescriptionExpanded"
                                                      }
                                                    },
                                                    "image": "$.DlcImage"
                                                  }
                                                }
                                              }
                                            }
                                          ],
                                          "userresolution": {
                                            "$if": {
                                              "$condition": {
                                                "$and": [
                                                  "$not $($isnull $.Contract)",
                                                  {
                                                    "$equal": [
                                                      "usercreated",
                                                      "$.Contract.Metadata.Type"
                                                    ]
                                                  }
                                                ]
                                              },
                                              "$then": {
                                                "informationtarget": "contract.creator",
                                                "profileid": "$.Contract.Metadata.CreatorUserId"
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "onbutton": [
                                    {
                                      "$if $not $arg _isonline": {
                                        "$then": {
                                          "open-package-store": {
                                            "packageid": "$.packageid",
                                            "skipdialog": true
                                          }
                                        },
                                        "$else": {
                                          "show-store-item-detail": {
                                            "itemId": {
                                              "$setup": {
                                                "$set LocationId": {
                                                  "$if $isnull $.SubLocation": {
                                                    "$then": {
                                                      "$if $isnull $.Location": {
                                                        "$then": {
                                                          "$if $not $($isnull $.Contract)": {
                                                            "$then": "$.Contract.Metadata.Location",
                                                            "$else": null
                                                          }
                                                        },
                                                        "$else": "$.Location.Id"
                                                      }
                                                    },
                                                    "$else": "$.SubLocation.Id"
                                                  }
                                                },
                                                "$in": {
                                                  "$if": {
                                                    "$condition": {
                                                      "$or": [
                                                        "$eqs ($.LocationId,LOCATION_PARENT_PARIS)",
                                                        "$eqs ($.LocationId,LOCATION_PARIS)",
                                                        "$eqs ($.LocationId,LOCATION_PARENT_COASTALTOWN)",
                                                        "$eqs ($.LocationId,LOCATION_COASTALTOWN)",
                                                        "$eqs ($.LocationId,LOCATION_COASTALTOWN_NIGHT)",
                                                        "$eqs ($.LocationId,LOCATION_COASTALTOWN_MOVIESET)",
                                                        "$eqs ($.LocationId,LOCATION_PARENT_MARRAKECH)",
                                                        "$eqs ($.LocationId,LOCATION_MARRAKECH)",
                                                        "$eqs ($.LocationId,LOCATION_MARRAKECH_NIGHT)",
                                                        "$eqs ($.LocationId,LOCATION_PARENT_BANGKOK)",
                                                        "$eqs ($.LocationId,LOCATION_BANGKOK)",
                                                        "$eqs ($.LocationId,LOCATION_PARENT_COLORADO)",
                                                        "$eqs ($.LocationId,LOCATION_COLORADO)",
                                                        "$eqs ($.LocationId,LOCATION_PARENT_HOKKAIDO)",
                                                        "$eqs ($.LocationId,LOCATION_HOKKAIDO)",
                                                        "$eqs ($.LocationId,LOCATION_COASTALTOWN_EBOLA)",
                                                        "$eqs ($.LocationId,LOCATION_BANGKOK_ZIKA)",
                                                        "$eqs ($.LocationId,LOCATION_COLORADO_RABIES)",
                                                        "$eqs ($.LocationId,LOCATION_HOKKAIDO_FLU)"
                                                      ]
                                                    },
                                                    "$then": {
                                                      "$if": {
                                                        "$condition": {
                                                          "$and": [
                                                            "$not $isuser season2",
                                                            {
                                                              "$if": {
                                                                "$condition": {
                                                                  "$or": [
                                                                    "$eqs ($arg _platform,orbis)",
                                                                    "$eqs ($.Platform,orbis)"
                                                                  ]
                                                                },
                                                                "$then": true,
                                                                "$else": false
                                                              }
                                                            }
                                                          ]
                                                        },
                                                        "$then": {
                                                          "$setup": {
                                                            "$set Platform": {
                                                              "$if $isnull $.Platform": {
                                                                "$then": "$arg _platform",
                                                                "$else": "$.Platform"
                                                              }
                                                            },
                                                            "$set Region": {
                                                              "$if $isnull $.Region": {
                                                                "$then": "$arg _region",
                                                                "$else": "$.Region"
                                                              }
                                                            },
                                                            "$in": {
                                                              "$switch $.Platform": [
                                                                {
                                                                  "case": "pc",
                                                                  "return": "863550"
                                                                },
                                                                {
                                                                  "case": "orbis",
                                                                  "return": {
                                                                    "$switch $.Region": [
                                                                      {
                                                                        "case": "asia",
                                                                        "return": "STARTPACK0000000"
                                                                      },
                                                                      {
                                                                        "case": "jp",
                                                                        "return": "HITMANSTANDARD00"
                                                                      },
                                                                      {
                                                                        "default": "STARTPACK0000000"
                                                                      }
                                                                    ]
                                                                  }
                                                                },
                                                                {
                                                                  "case": "durango",
                                                                  "return": "dbbf8074-f8e5-48c6-8162-f4af3cdcdcb8"
                                                                }
                                                              ]
                                                            }
                                                          }
                                                        },
                                                        "$else": {
                                                          "$if": {
                                                            "$condition": {
                                                              "$or": [
                                                                "$isuser intropack",
                                                                "$isuser fullexperience"
                                                              ]
                                                            },
                                                            "$then": {
                                                              "$setup": {
                                                                "$set Platform": {
                                                                  "$if $isnull $.Platform": {
                                                                    "$then": "$arg _platform",
                                                                    "$else": "$.Platform"
                                                                  }
                                                                },
                                                                "$set Region": {
                                                                  "$if $isnull $.Region": {
                                                                    "$then": "$arg _region",
                                                                    "$else": "$.Region"
                                                                  }
                                                                },
                                                                "$in": {
                                                                  "$switch $.Platform": [
                                                                    {
                                                                      "case": "pc",
                                                                      "return": "960832"
                                                                    },
                                                                    {
                                                                      "case": "orbis",
                                                                      "return": {
                                                                        "$switch $.Region": [
                                                                          {
                                                                            "case": "asia",
                                                                            "return": "S1GOTYUPASIA0000"
                                                                          },
                                                                          {
                                                                            "case": "jp",
                                                                            "return": "S1GOTYUPASIA0000"
                                                                          },
                                                                          {
                                                                            "default": "S1GOTYUPGRADE000"
                                                                          }
                                                                        ]
                                                                      }
                                                                    },
                                                                    {
                                                                      "case": "durango",
                                                                      "return": "fdb4873a-b559-4cbd-addc-625f833de81b"
                                                                    }
                                                                  ]
                                                                }
                                                              }
                                                            },
                                                            "$else": {
                                                              "$setup": {
                                                                "$set Platform": {
                                                                  "$if $isnull $.Platform": {
                                                                    "$then": "$arg _platform",
                                                                    "$else": "$.Platform"
                                                                  }
                                                                },
                                                                "$set Region": {
                                                                  "$if $isnull $.Region": {
                                                                    "$then": "$arg _region",
                                                                    "$else": "$.Region"
                                                                  }
                                                                },
                                                                "$in": {
                                                                  "$switch $.Platform": [
                                                                    {
                                                                      "case": "pc",
                                                                      "return": "960831"
                                                                    },
                                                                    {
                                                                      "case": "orbis",
                                                                      "return": {
                                                                        "$switch $.Region": [
                                                                          {
                                                                            "case": "asia",
                                                                            "return": "S1GOTYASIA000000"
                                                                          },
                                                                          {
                                                                            "default": "S1GOTY0000000000"
                                                                          }
                                                                        ]
                                                                      }
                                                                    },
                                                                    {
                                                                      "case": "durango",
                                                                      "return": {
                                                                        "$if $isuser season2partial": {
                                                                          "$then": "a8b30989-98b0-484f-ada0-71dd5117ed58",
                                                                          "$else": "452917d6-f81e-435b-9da4-6891e22326a6"
                                                                        }
                                                                      }
                                                                    }
                                                                  ]
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    },
                                                    "$else": {
                                                      "$if": {
                                                        "$condition": {
                                                          "$or": [
                                                            "$eqs ($.LocationId,LOCATION_MIAMI_COTTONMOUTH)",
                                                            "$eqs ($.LocationId,LOCATION_COLOMBIA_ANACONDA)",
                                                            "$eqs ($.LocationId,LOCATION_MUMBAI_KINGCOBRA)",
                                                            "$eqs ($.LocationId,LOCATION_NORTHAMERICA_GARTERSNAKE)",
                                                            "$eqs ($.LocationId,LOCATION_PARENT_SALTY)",
                                                            "$eqs ($.LocationId,LOCATION_SALTY_SEAGULL)",
                                                            "$eqs ($.LocationId,LOCATION_PARENT_CAGED)",
                                                            "$eqs ($.LocationId,LOCATION_CAGED_FALCON)",
                                                            "$eqs ($.LocationId,LOCATION_PARENT_GREEDY)",
                                                            "$eqs ($.LocationId,LOCATION_GREEDY_RACCOON)",
                                                            "$eqs ($.LocationId,LOCATION_PARENT_OPULENT)",
                                                            "$eqs ($.LocationId,LOCATION_OPULENT_STINGRAY)"
                                                          ]
                                                        },
                                                        "$then": {
                                                          "$if": {
                                                            "$condition": {
                                                              "$and": [
                                                                "$not $isuser season2",
                                                                {
                                                                  "$if": {
                                                                    "$condition": {
                                                                      "$or": [
                                                                        "$eqs ($arg _platform,orbis)",
                                                                        "$eqs ($.Platform,orbis)"
                                                                      ]
                                                                    },
                                                                    "$then": true,
                                                                    "$else": false
                                                                  }
                                                                }
                                                              ]
                                                            },
                                                            "$then": {
                                                              "$setup": {
                                                                "$set Platform": {
                                                                  "$if $isnull $.Platform": {
                                                                    "$then": "$arg _platform",
                                                                    "$else": "$.Platform"
                                                                  }
                                                                },
                                                                "$set Region": {
                                                                  "$if $isnull $.Region": {
                                                                    "$then": "$arg _region",
                                                                    "$else": "$.Region"
                                                                  }
                                                                },
                                                                "$in": {
                                                                  "$switch $.Platform": [
                                                                    {
                                                                      "case": "pc",
                                                                      "return": "863550"
                                                                    },
                                                                    {
                                                                      "case": "orbis",
                                                                      "return": {
                                                                        "$switch $.Region": [
                                                                          {
                                                                            "case": "asia",
                                                                            "return": "STARTPACK0000000"
                                                                          },
                                                                          {
                                                                            "case": "jp",
                                                                            "return": "HITMANSTANDARD00"
                                                                          },
                                                                          {
                                                                            "default": "STARTPACK0000000"
                                                                          }
                                                                        ]
                                                                      }
                                                                    },
                                                                    {
                                                                      "case": "durango",
                                                                      "return": "dbbf8074-f8e5-48c6-8162-f4af3cdcdcb8"
                                                                    }
                                                                  ]
                                                                }
                                                              }
                                                            },
                                                            "$else": {
                                                              "$setup": {
                                                                "$set Platform": {
                                                                  "$if $isnull $.Platform": {
                                                                    "$then": "$arg _platform",
                                                                    "$else": "$.Platform"
                                                                  }
                                                                },
                                                                "$set Region": {
                                                                  "$if $isnull $.Region": {
                                                                    "$then": "$arg _region",
                                                                    "$else": "$.Region"
                                                                  }
                                                                },
                                                                "$in": {
                                                                  "$switch $.Platform": [
                                                                    {
                                                                      "case": "pc",
                                                                      "return": "863550"
                                                                    },
                                                                    {
                                                                      "case": "orbis",
                                                                      "return": "0000SEASONPASSH2"
                                                                    },
                                                                    {
                                                                      "case": "durango",
                                                                      "return": "6c057b75-e77b-4438-879e-6d563da92f32"
                                                                    }
                                                                  ]
                                                                }
                                                              }
                                                            }
                                                          }
                                                        },
                                                        "$else": {
                                                          "$setup": {
                                                            "$set Platform": {
                                                              "$if $isnull $.Platform": {
                                                                "$then": "$arg _platform",
                                                                "$else": "$.Platform"
                                                              }
                                                            },
                                                            "$set Region": {
                                                              "$if $isnull $.Region": {
                                                                "$then": "$arg _region",
                                                                "$else": "$.Region"
                                                              }
                                                            },
                                                            "$in": {
                                                              "$switch $.Platform": [
                                                                {
                                                                  "case": "pc",
                                                                  "return": "863550"
                                                                },
                                                                {
                                                                  "case": "orbis",
                                                                  "return": {
                                                                    "$switch $.Region": [
                                                                      {
                                                                        "case": "asia",
                                                                        "return": "STARTPACK0000000"
                                                                      },
                                                                      {
                                                                        "case": "jp",
                                                                        "return": "HITMANSTANDARD00"
                                                                      },
                                                                      {
                                                                        "default": "STARTPACK0000000"
                                                                      }
                                                                    ]
                                                                  }
                                                                },
                                                                {
                                                                  "case": "durango",
                                                                  "return": "dbbf8074-f8e5-48c6-8162-f4af3cdcdcb8"
                                                                }
                                                              ]
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  ]
                                }
                              }
                            ]
                          }
                        },
                        "$else": {
                          "show-modal": {
                            "config": {
                              "view": "menu3.modal.ModalDialogGeneric",
                              "buttons": [
                                {
                                  "label": {
                                    "$setup": {
                                      "$set Store": {
                                        "$switch $arg _platform": [
                                          {
                                            "case": "pc",
                                            "return": "UI_MENU_GO_TO_STORE"
                                          },
                                          {
                                            "case": "orbis",
                                            "return": "UI_MENU_GO_TO_STORE_PSN"
                                          },
                                          {
                                            "case": "durango",
                                            "return": "UI_MENU_GO_TO_STORE_XBOX"
                                          }
                                        ]
                                      },
                                      "$in": "$formatstring {$loc UI_MENU_PAGE_FEATURED_GOTO_HEADER} {$loc $.Store}"
                                    }
                                  },
                                  "icon": "arrowright"
                                },
                                {
                                  "label": "$loc UI_DIALOG_CANCEL",
                                  "type": "cancel"
                                }
                              ],
                              "data": {
                                "$setup": {
                                  "$set Title": "UI_DIALOG_CONTRACT_SEARCH_DLC_NOT_INSTALLED_TITLE",
                                  "_comment": "using the NOT_OWNED string here as well is intentional",
                                  "$set Description": "UI_DIALOG_CONTRACT_SEARCH_DLC_NOT_INSTALLED_DESCRIPTION",
                                  "$in": {
                                    "title": "$loc $.Title",
                                    "frameheightmax": 850,
                                    "information": [
                                      {
                                        "$if $not $($isnull $.Contract)": {
                                          "$then": {
                                            "contract": {
                                              "type": "$.Contract.Metadata.Type",
                                              "name": {
                                                "$switch $.Contract.Metadata.Type": [
                                                  {
                                                    "case": "usercreated",
                                                    "return": {
                                                      "$if $($arg _ugcrestricted)": {
                                                        "$then": "$loc UI_CONTRACT_NO_ACCESS_UGC",
                                                        "$else": "$.Contract.Metadata.Title"
                                                      }
                                                    }
                                                  },
                                                  {
                                                    "case": "featured",
                                                    "return": "$.Contract.Metadata.Title"
                                                  },
                                                  {
                                                    "default": "$loc $.Contract.Metadata.Title"
                                                  }
                                                ]
                                              },
                                              "creator": {
                                                "$switch $.Contract.Metadata.Type": [
                                                  {
                                                    "case": "featured",
                                                    "return": "$loc UI_CATEGORY_MESSAGE_CENTER_COMMUNITY"
                                                  },
                                                  {
                                                    "default": "$($user $.Contract.Metadata.CreatorUserId).name"
                                                  }
                                                ]
                                              },
                                              "id": "$formatpublicid $.Contract.Metadata.PublicId",
                                              "creationdate": "$.Contract.Metadata.CreationTimestamp",
                                              "description": {
                                                "$switch $.Contract.Metadata.Type": [
                                                  {
                                                    "case": "featured",
                                                    "return": {
                                                      "$if $stringvalid $loc $.Contract.Metadata.Description": {
                                                        "$then": "$loc $.Contract.Metadata.Description",
                                                        "$else": "$.Contract.Metadata.Description"
                                                      }
                                                    }
                                                  },
                                                  {
                                                    "case": "creation",
                                                    "return": "$loc UI_MENU_PAGE_CREATE_CONTRACT_NO_ACCESS_DESCRIPTION"
                                                  },
                                                  {
                                                    "case": "elusive",
                                                    "return": "$loc UI_CONTRACT_HEADER_ELUSIVE"
                                                  },
                                                  {
                                                    "default": "$loc $.Contract.Metadata.Description"
                                                  }
                                                ]
                                              },
                                              "image": {
                                                "$if $.Contract.Metadata.TileImage": {
                                                  "$then": {
                                                    "$if $gt ($arraysize $.Contract.Metadata.TileImage,0)": {
                                                      "$then": {
                                                        "$setup": {
                                                          "$set EngineMode": {
                                                            "$if $isnull $.EngineMode": {
                                                              "$then": {
                                                                "$if $isnull $arg EngineMode": {
                                                                  "$then": "singleplayer",
                                                                  "$else": "$arg EngineMode"
                                                                }
                                                              },
                                                              "$else": "$.EngineMode"
                                                            }
                                                          },
                                                          "$set TileImageOrdered": {
                                                            "$orderby": {
                                                              "from": "$expand $.Contract.Metadata.TileImage",
                                                              "by": "Mode",
                                                              "order": [
                                                                "$.EngineMode"
                                                              ]
                                                            }
                                                          },
                                                          "$in": "$res $.TileImageOrdered[0].Image"
                                                        }
                                                      },
                                                      "$else": "$res $expand $.Contract.Metadata.TileImage"
                                                    }
                                                  },
                                                  "$else": "$res images/ui/tiles/defaultmenutilesmall.jpg"
                                                }
                                              },
                                              "icon": {
                                                "$switch $.Contract.Metadata.Type": [
                                                  {
                                                    "case": "dummy",
                                                    "return": {
                                                      "_dynamicPackerOverride": [
                                                        "SniperChallenge"
                                                      ]
                                                    }
                                                  },
                                                  {
                                                    "case": "orbis",
                                                    "return": "ica"
                                                  },
                                                  {
                                                    "case": "campaign",
                                                    "return": "mission"
                                                  },
                                                  {
                                                    "case": "sniper",
                                                    "return": "sniperrifle"
                                                  },
                                                  {
                                                    "default": {
                                                      "$if $.Contract.Metadata.IsVersus": {
                                                        "$then": "versus",
                                                        "$else": "$.Contract.Metadata.Type"
                                                      }
                                                    }
                                                  }
                                                ]
                                              },
                                              "locked": true
                                            }
                                          }
                                        }
                                      },
                                      {
                                        "dlcmissing": {
                                          "$setup": {
                                            "$set DlcName": {
                                              "$if $isnull $.DlcName": {
                                                "$then": {
                                                  "$if $isnull $.SubLocation": {
                                                    "$then": {
                                                      "$if $isnull $.Location": {
                                                        "$then": "$loc $.Data.DlcName",
                                                        "$else": "$loc $.Location.Properties.DlcName"
                                                      }
                                                    },
                                                    "$else": "$loc $.SubLocation.Properties.DlcName"
                                                  }
                                                },
                                                "$else": "$.DlcName"
                                              }
                                            },
                                            "$set DlcImage": {
                                              "$if $isnull $.DlcImage": {
                                                "$then": {
                                                  "$if $isnull $.SubLocation": {
                                                    "$then": {
                                                      "$if $isnull $.Location": {
                                                        "$then": "$res $.Data.DlcImage",
                                                        "$else": "$res $.Location.Properties.DlcImage"
                                                      }
                                                    },
                                                    "$else": "$res $.SubLocation.Properties.DlcImage"
                                                  }
                                                },
                                                "$else": "$.DlcImage"
                                              }
                                            },
                                            "$set CreatedInMission": "$loc $formatstring UI_{$.Contract.Metadata.Location}_TITLE",
                                            "$set CreatedInLocation": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                                            "$in": {
                                              "showcreatedin": {
                                                "$switch $.Contract.Metadata.Type": [
                                                  {
                                                    "case": "featured",
                                                    "return": true
                                                  },
                                                  {
                                                    "case": "usercreated",
                                                    "return": true
                                                  },
                                                  {
                                                    "default": false
                                                  }
                                                ]
                                              },
                                              "episode": "$.DlcName",
                                              "location": {
                                                "$loc": {
                                                  "key": "UI_DIALOG_CONTRACT_SEARCH_CREATED_IN",
                                                  "data": [
                                                    "$formatstring {$.CreatedInMission}, {$.CreatedInLocation}"
                                                  ]
                                                }
                                              },
                                              "description": {
                                                "$if $isnull $.DescriptionExpanded": {
                                                  "$then": {
                                                    "$loc": {
                                                      "key": "$.Description",
                                                      "data": [
                                                        "$.DlcName"
                                                      ]
                                                    }
                                                  },
                                                  "$else": "$.DescriptionExpanded"
                                                }
                                              },
                                              "image": "$.DlcImage"
                                            }
                                          }
                                        }
                                      }
                                    ],
                                    "userresolution": {
                                      "$if": {
                                        "$condition": {
                                          "$and": [
                                            "$not $($isnull $.Contract)",
                                            {
                                              "$equal": [
                                                "usercreated",
                                                "$.Contract.Metadata.Type"
                                              ]
                                            }
                                          ]
                                        },
                                        "$then": {
                                          "informationtarget": "contract.creator",
                                          "profileid": "$.Contract.Metadata.CreatorUserId"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            },
                            "onbutton": [
                              {
                                "$if $not $arg _isonline": {
                                  "$then": {
                                    "open-package-store": {
                                      "packageid": "$.packageid",
                                      "skipdialog": true
                                    }
                                  },
                                  "$else": {
                                    "show-store-item-detail": {
                                      "itemId": {
                                        "$setup": {
                                          "$set LocationId": {
                                            "$if $isnull $.SubLocation": {
                                              "$then": {
                                                "$if $isnull $.Location": {
                                                  "$then": {
                                                    "$if $not $($isnull $.Contract)": {
                                                      "$then": "$.Contract.Metadata.Location",
                                                      "$else": null
                                                    }
                                                  },
                                                  "$else": "$.Location.Id"
                                                }
                                              },
                                              "$else": "$.SubLocation.Id"
                                            }
                                          },
                                          "$in": {
                                            "$if": {
                                              "$condition": {
                                                "$or": [
                                                  "$eqs ($.LocationId,LOCATION_PARENT_PARIS)",
                                                  "$eqs ($.LocationId,LOCATION_PARIS)",
                                                  "$eqs ($.LocationId,LOCATION_PARENT_COASTALTOWN)",
                                                  "$eqs ($.LocationId,LOCATION_COASTALTOWN)",
                                                  "$eqs ($.LocationId,LOCATION_COASTALTOWN_NIGHT)",
                                                  "$eqs ($.LocationId,LOCATION_COASTALTOWN_MOVIESET)",
                                                  "$eqs ($.LocationId,LOCATION_PARENT_MARRAKECH)",
                                                  "$eqs ($.LocationId,LOCATION_MARRAKECH)",
                                                  "$eqs ($.LocationId,LOCATION_MARRAKECH_NIGHT)",
                                                  "$eqs ($.LocationId,LOCATION_PARENT_BANGKOK)",
                                                  "$eqs ($.LocationId,LOCATION_BANGKOK)",
                                                  "$eqs ($.LocationId,LOCATION_PARENT_COLORADO)",
                                                  "$eqs ($.LocationId,LOCATION_COLORADO)",
                                                  "$eqs ($.LocationId,LOCATION_PARENT_HOKKAIDO)",
                                                  "$eqs ($.LocationId,LOCATION_HOKKAIDO)",
                                                  "$eqs ($.LocationId,LOCATION_COASTALTOWN_EBOLA)",
                                                  "$eqs ($.LocationId,LOCATION_BANGKOK_ZIKA)",
                                                  "$eqs ($.LocationId,LOCATION_COLORADO_RABIES)",
                                                  "$eqs ($.LocationId,LOCATION_HOKKAIDO_FLU)"
                                                ]
                                              },
                                              "$then": {
                                                "$if": {
                                                  "$condition": {
                                                    "$and": [
                                                      "$not $isuser season2",
                                                      {
                                                        "$if": {
                                                          "$condition": {
                                                            "$or": [
                                                              "$eqs ($arg _platform,orbis)",
                                                              "$eqs ($.Platform,orbis)"
                                                            ]
                                                          },
                                                          "$then": true,
                                                          "$else": false
                                                        }
                                                      }
                                                    ]
                                                  },
                                                  "$then": {
                                                    "$setup": {
                                                      "$set Platform": {
                                                        "$if $isnull $.Platform": {
                                                          "$then": "$arg _platform",
                                                          "$else": "$.Platform"
                                                        }
                                                      },
                                                      "$set Region": {
                                                        "$if $isnull $.Region": {
                                                          "$then": "$arg _region",
                                                          "$else": "$.Region"
                                                        }
                                                      },
                                                      "$in": {
                                                        "$switch $.Platform": [
                                                          {
                                                            "case": "pc",
                                                            "return": "863550"
                                                          },
                                                          {
                                                            "case": "orbis",
                                                            "return": {
                                                              "$switch $.Region": [
                                                                {
                                                                  "case": "asia",
                                                                  "return": "STARTPACK0000000"
                                                                },
                                                                {
                                                                  "case": "jp",
                                                                  "return": "HITMANSTANDARD00"
                                                                },
                                                                {
                                                                  "default": "STARTPACK0000000"
                                                                }
                                                              ]
                                                            }
                                                          },
                                                          {
                                                            "case": "durango",
                                                            "return": "dbbf8074-f8e5-48c6-8162-f4af3cdcdcb8"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  },
                                                  "$else": {
                                                    "$if": {
                                                      "$condition": {
                                                        "$or": [
                                                          "$isuser intropack",
                                                          "$isuser fullexperience"
                                                        ]
                                                      },
                                                      "$then": {
                                                        "$setup": {
                                                          "$set Platform": {
                                                            "$if $isnull $.Platform": {
                                                              "$then": "$arg _platform",
                                                              "$else": "$.Platform"
                                                            }
                                                          },
                                                          "$set Region": {
                                                            "$if $isnull $.Region": {
                                                              "$then": "$arg _region",
                                                              "$else": "$.Region"
                                                            }
                                                          },
                                                          "$in": {
                                                            "$switch $.Platform": [
                                                              {
                                                                "case": "pc",
                                                                "return": "960832"
                                                              },
                                                              {
                                                                "case": "orbis",
                                                                "return": {
                                                                  "$switch $.Region": [
                                                                    {
                                                                      "case": "asia",
                                                                      "return": "S1GOTYUPASIA0000"
                                                                    },
                                                                    {
                                                                      "case": "jp",
                                                                      "return": "S1GOTYUPASIA0000"
                                                                    },
                                                                    {
                                                                      "default": "S1GOTYUPGRADE000"
                                                                    }
                                                                  ]
                                                                }
                                                              },
                                                              {
                                                                "case": "durango",
                                                                "return": "fdb4873a-b559-4cbd-addc-625f833de81b"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      },
                                                      "$else": {
                                                        "$setup": {
                                                          "$set Platform": {
                                                            "$if $isnull $.Platform": {
                                                              "$then": "$arg _platform",
                                                              "$else": "$.Platform"
                                                            }
                                                          },
                                                          "$set Region": {
                                                            "$if $isnull $.Region": {
                                                              "$then": "$arg _region",
                                                              "$else": "$.Region"
                                                            }
                                                          },
                                                          "$in": {
                                                            "$switch $.Platform": [
                                                              {
                                                                "case": "pc",
                                                                "return": "960831"
                                                              },
                                                              {
                                                                "case": "orbis",
                                                                "return": {
                                                                  "$switch $.Region": [
                                                                    {
                                                                      "case": "asia",
                                                                      "return": "S1GOTYASIA000000"
                                                                    },
                                                                    {
                                                                      "default": "S1GOTY0000000000"
                                                                    }
                                                                  ]
                                                                }
                                                              },
                                                              {
                                                                "case": "durango",
                                                                "return": {
                                                                  "$if $isuser season2partial": {
                                                                    "$then": "a8b30989-98b0-484f-ada0-71dd5117ed58",
                                                                    "$else": "452917d6-f81e-435b-9da4-6891e22326a6"
                                                                  }
                                                                }
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              },
                                              "$else": {
                                                "$if": {
                                                  "$condition": {
                                                    "$or": [
                                                      "$eqs ($.LocationId,LOCATION_MIAMI_COTTONMOUTH)",
                                                      "$eqs ($.LocationId,LOCATION_COLOMBIA_ANACONDA)",
                                                      "$eqs ($.LocationId,LOCATION_MUMBAI_KINGCOBRA)",
                                                      "$eqs ($.LocationId,LOCATION_NORTHAMERICA_GARTERSNAKE)",
                                                      "$eqs ($.LocationId,LOCATION_PARENT_SALTY)",
                                                      "$eqs ($.LocationId,LOCATION_SALTY_SEAGULL)",
                                                      "$eqs ($.LocationId,LOCATION_PARENT_CAGED)",
                                                      "$eqs ($.LocationId,LOCATION_CAGED_FALCON)",
                                                      "$eqs ($.LocationId,LOCATION_PARENT_GREEDY)",
                                                      "$eqs ($.LocationId,LOCATION_GREEDY_RACCOON)",
                                                      "$eqs ($.LocationId,LOCATION_PARENT_OPULENT)",
                                                      "$eqs ($.LocationId,LOCATION_OPULENT_STINGRAY)"
                                                    ]
                                                  },
                                                  "$then": {
                                                    "$if": {
                                                      "$condition": {
                                                        "$and": [
                                                          "$not $isuser season2",
                                                          {
                                                            "$if": {
                                                              "$condition": {
                                                                "$or": [
                                                                  "$eqs ($arg _platform,orbis)",
                                                                  "$eqs ($.Platform,orbis)"
                                                                ]
                                                              },
                                                              "$then": true,
                                                              "$else": false
                                                            }
                                                          }
                                                        ]
                                                      },
                                                      "$then": {
                                                        "$setup": {
                                                          "$set Platform": {
                                                            "$if $isnull $.Platform": {
                                                              "$then": "$arg _platform",
                                                              "$else": "$.Platform"
                                                            }
                                                          },
                                                          "$set Region": {
                                                            "$if $isnull $.Region": {
                                                              "$then": "$arg _region",
                                                              "$else": "$.Region"
                                                            }
                                                          },
                                                          "$in": {
                                                            "$switch $.Platform": [
                                                              {
                                                                "case": "pc",
                                                                "return": "863550"
                                                              },
                                                              {
                                                                "case": "orbis",
                                                                "return": {
                                                                  "$switch $.Region": [
                                                                    {
                                                                      "case": "asia",
                                                                      "return": "STARTPACK0000000"
                                                                    },
                                                                    {
                                                                      "case": "jp",
                                                                      "return": "HITMANSTANDARD00"
                                                                    },
                                                                    {
                                                                      "default": "STARTPACK0000000"
                                                                    }
                                                                  ]
                                                                }
                                                              },
                                                              {
                                                                "case": "durango",
                                                                "return": "dbbf8074-f8e5-48c6-8162-f4af3cdcdcb8"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      },
                                                      "$else": {
                                                        "$setup": {
                                                          "$set Platform": {
                                                            "$if $isnull $.Platform": {
                                                              "$then": "$arg _platform",
                                                              "$else": "$.Platform"
                                                            }
                                                          },
                                                          "$set Region": {
                                                            "$if $isnull $.Region": {
                                                              "$then": "$arg _region",
                                                              "$else": "$.Region"
                                                            }
                                                          },
                                                          "$in": {
                                                            "$switch $.Platform": [
                                                              {
                                                                "case": "pc",
                                                                "return": "863550"
                                                              },
                                                              {
                                                                "case": "orbis",
                                                                "return": "0000SEASONPASSH2"
                                                              },
                                                              {
                                                                "case": "durango",
                                                                "return": "6c057b75-e77b-4438-879e-6d563da92f32"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    }
                                                  },
                                                  "$else": {
                                                    "$setup": {
                                                      "$set Platform": {
                                                        "$if $isnull $.Platform": {
                                                          "$then": "$arg _platform",
                                                          "$else": "$.Platform"
                                                        }
                                                      },
                                                      "$set Region": {
                                                        "$if $isnull $.Region": {
                                                          "$then": "$arg _region",
                                                          "$else": "$.Region"
                                                        }
                                                      },
                                                      "$in": {
                                                        "$switch $.Platform": [
                                                          {
                                                            "case": "pc",
                                                            "return": "863550"
                                                          },
                                                          {
                                                            "case": "orbis",
                                                            "return": {
                                                              "$switch $.Region": [
                                                                {
                                                                  "case": "asia",
                                                                  "return": "STARTPACK0000000"
                                                                },
                                                                {
                                                                  "case": "jp",
                                                                  "return": "HITMANSTANDARD00"
                                                                },
                                                                {
                                                                  "default": "STARTPACK0000000"
                                                                }
                                                              ]
                                                            }
                                                          },
                                                          {
                                                            "case": "durango",
                                                            "return": "dbbf8074-f8e5-48c6-8162-f4af3cdcdcb8"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            ]
                          }
                        }
                      }
                    }
                  }
                },
                "on-content-downloading": {
                  "_comment": "DLC owned and currently downloading",
                  "alter-actions": {
                    "path": "accept",
                    "value": {
                      "show-modal": {
                        "config": {
                          "view": "menu3.modal.ModalDialogGeneric",
                          "buttons": [
                            {
                              "label": "$loc UI_DIALOG_CANCEL",
                              "type": "cancel"
                            }
                          ],
                          "data": {
                            "$setup": {
                              "$set Title": "UI_DIALOG_CONTRACT_SEARCH_DLC_DOWNLOADING_TITLE",
                              "$set Description": "UI_DIALOG_CONTRACT_SEARCH_DLC_DOWNLOADING_DESCRIPTION",
                              "$in": {
                                "title": "$loc $.Title",
                                "frameheightmax": 850,
                                "information": [
                                  {
                                    "$if $not $($isnull $.Contract)": {
                                      "$then": {
                                        "contract": {
                                          "type": "$.Contract.Metadata.Type",
                                          "name": {
                                            "$switch $.Contract.Metadata.Type": [
                                              {
                                                "case": "usercreated",
                                                "return": {
                                                  "$if $($arg _ugcrestricted)": {
                                                    "$then": "$loc UI_CONTRACT_NO_ACCESS_UGC",
                                                    "$else": "$.Contract.Metadata.Title"
                                                  }
                                                }
                                              },
                                              {
                                                "case": "featured",
                                                "return": "$.Contract.Metadata.Title"
                                              },
                                              {
                                                "default": "$loc $.Contract.Metadata.Title"
                                              }
                                            ]
                                          },
                                          "creator": {
                                            "$switch $.Contract.Metadata.Type": [
                                              {
                                                "case": "featured",
                                                "return": "$loc UI_CATEGORY_MESSAGE_CENTER_COMMUNITY"
                                              },
                                              {
                                                "default": "$($user $.Contract.Metadata.CreatorUserId).name"
                                              }
                                            ]
                                          },
                                          "id": "$formatpublicid $.Contract.Metadata.PublicId",
                                          "creationdate": "$.Contract.Metadata.CreationTimestamp",
                                          "description": {
                                            "$switch $.Contract.Metadata.Type": [
                                              {
                                                "case": "featured",
                                                "return": {
                                                  "$if $stringvalid $loc $.Contract.Metadata.Description": {
                                                    "$then": "$loc $.Contract.Metadata.Description",
                                                    "$else": "$.Contract.Metadata.Description"
                                                  }
                                                }
                                              },
                                              {
                                                "case": "creation",
                                                "return": "$loc UI_MENU_PAGE_CREATE_CONTRACT_NO_ACCESS_DESCRIPTION"
                                              },
                                              {
                                                "case": "elusive",
                                                "return": "$loc UI_CONTRACT_HEADER_ELUSIVE"
                                              },
                                              {
                                                "default": "$loc $.Contract.Metadata.Description"
                                              }
                                            ]
                                          },
                                          "image": {
                                            "$if $.Contract.Metadata.TileImage": {
                                              "$then": {
                                                "$if $gt ($arraysize $.Contract.Metadata.TileImage,0)": {
                                                  "$then": {
                                                    "$setup": {
                                                      "$set EngineMode": {
                                                        "$if $isnull $.EngineMode": {
                                                          "$then": {
                                                            "$if $isnull $arg EngineMode": {
                                                              "$then": "singleplayer",
                                                              "$else": "$arg EngineMode"
                                                            }
                                                          },
                                                          "$else": "$.EngineMode"
                                                        }
                                                      },
                                                      "$set TileImageOrdered": {
                                                        "$orderby": {
                                                          "from": "$expand $.Contract.Metadata.TileImage",
                                                          "by": "Mode",
                                                          "order": [
                                                            "$.EngineMode"
                                                          ]
                                                        }
                                                      },
                                                      "$in": "$res $.TileImageOrdered[0].Image"
                                                    }
                                                  },
                                                  "$else": "$res $expand $.Contract.Metadata.TileImage"
                                                }
                                              },
                                              "$else": "$res images/ui/tiles/defaultmenutilesmall.jpg"
                                            }
                                          },
                                          "icon": {
                                            "$switch $.Contract.Metadata.Type": [
                                              {
                                                "case": "dummy",
                                                "return": {
                                                  "_dynamicPackerOverride": [
                                                    "SniperChallenge"
                                                  ]
                                                }
                                              },
                                              {
                                                "case": "orbis",
                                                "return": "ica"
                                              },
                                              {
                                                "case": "campaign",
                                                "return": "mission"
                                              },
                                              {
                                                "case": "sniper",
                                                "return": "sniperrifle"
                                              },
                                              {
                                                "default": {
                                                  "$if $.Contract.Metadata.IsVersus": {
                                                    "$then": "versus",
                                                    "$else": "$.Contract.Metadata.Type"
                                                  }
                                                }
                                              }
                                            ]
                                          },
                                          "locked": true
                                        }
                                      }
                                    }
                                  },
                                  {
                                    "dlcmissing": {
                                      "$setup": {
                                        "$set DlcName": {
                                          "$if $isnull $.DlcName": {
                                            "$then": {
                                              "$if $isnull $.SubLocation": {
                                                "$then": {
                                                  "$if $isnull $.Location": {
                                                    "$then": "$loc $.Data.DlcName",
                                                    "$else": "$loc $.Location.Properties.DlcName"
                                                  }
                                                },
                                                "$else": "$loc $.SubLocation.Properties.DlcName"
                                              }
                                            },
                                            "$else": "$.DlcName"
                                          }
                                        },
                                        "$set DlcImage": {
                                          "$if $isnull $.DlcImage": {
                                            "$then": {
                                              "$if $isnull $.SubLocation": {
                                                "$then": {
                                                  "$if $isnull $.Location": {
                                                    "$then": "$res $.Data.DlcImage",
                                                    "$else": "$res $.Location.Properties.DlcImage"
                                                  }
                                                },
                                                "$else": "$res $.SubLocation.Properties.DlcImage"
                                              }
                                            },
                                            "$else": "$.DlcImage"
                                          }
                                        },
                                        "$set CreatedInMission": "$loc $formatstring UI_{$.Contract.Metadata.Location}_TITLE",
                                        "$set CreatedInLocation": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                                        "$in": {
                                          "showcreatedin": {
                                            "$switch $.Contract.Metadata.Type": [
                                              {
                                                "case": "featured",
                                                "return": true
                                              },
                                              {
                                                "case": "usercreated",
                                                "return": true
                                              },
                                              {
                                                "default": false
                                              }
                                            ]
                                          },
                                          "episode": "$.DlcName",
                                          "location": {
                                            "$loc": {
                                              "key": "UI_DIALOG_CONTRACT_SEARCH_CREATED_IN",
                                              "data": [
                                                "$formatstring {$.CreatedInMission}, {$.CreatedInLocation}"
                                              ]
                                            }
                                          },
                                          "description": {
                                            "$if $isnull $.DescriptionExpanded": {
                                              "$then": {
                                                "$loc": {
                                                  "key": "$.Description",
                                                  "data": [
                                                    "$.DlcName"
                                                  ]
                                                }
                                              },
                                              "$else": "$.DescriptionExpanded"
                                            }
                                          },
                                          "image": "$.DlcImage"
                                        }
                                      }
                                    }
                                  }
                                ],
                                "userresolution": {
                                  "$if": {
                                    "$condition": {
                                      "$and": [
                                        "$not $($isnull $.Contract)",
                                        {
                                          "$equal": [
                                            "usercreated",
                                            "$.Contract.Metadata.Type"
                                          ]
                                        }
                                      ]
                                    },
                                    "$then": {
                                      "informationtarget": "contract.creator",
                                      "profileid": "$.Contract.Metadata.CreatorUserId"
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "on-content-update-required": {
                  "_comment": "DLC owned and update is required",
                  "alter-actions": {
                    "path": "accept",
                    "value": {
                      "show-dlc-update-dialog": {
                        "$setup": {
                          "$set DlcId": {
                            "$notransform": {
                              "$if $isnull $.OutdatedDlcId": {
                                "$then": -1,
                                "$else": "$.OutdatedDlcId"
                              }
                            }
                          },
                          "$in": {
                            "OutdatedDlcId": "$.DlcId"
                          }
                        }
                      },
                      "show-modal": {
                        "config": {
                          "view": "menu3.modal.ModalDialogGeneric",
                          "buttons": [
                            {
                              "label": "$loc UI_DIALOG_CANCEL",
                              "type": "cancel"
                            }
                          ],
                          "data": {
                            "$setup": {
                              "$set Title": "UI_DIALOG_DLC_DOWNLOAD",
                              "$set Description": "UI_DIALOG_CONTENT_REQUIRES_UPDATE_DESCRIPTION",
                              "$in": {
                                "title": "$loc $.Title",
                                "frameheightmax": 850,
                                "information": [
                                  {
                                    "$if $not $($isnull $.Contract)": {
                                      "$then": {
                                        "contract": {
                                          "type": "$.Contract.Metadata.Type",
                                          "name": {
                                            "$switch $.Contract.Metadata.Type": [
                                              {
                                                "case": "usercreated",
                                                "return": {
                                                  "$if $($arg _ugcrestricted)": {
                                                    "$then": "$loc UI_CONTRACT_NO_ACCESS_UGC",
                                                    "$else": "$.Contract.Metadata.Title"
                                                  }
                                                }
                                              },
                                              {
                                                "case": "featured",
                                                "return": "$.Contract.Metadata.Title"
                                              },
                                              {
                                                "default": "$loc $.Contract.Metadata.Title"
                                              }
                                            ]
                                          },
                                          "creator": {
                                            "$switch $.Contract.Metadata.Type": [
                                              {
                                                "case": "featured",
                                                "return": "$loc UI_CATEGORY_MESSAGE_CENTER_COMMUNITY"
                                              },
                                              {
                                                "default": "$($user $.Contract.Metadata.CreatorUserId).name"
                                              }
                                            ]
                                          },
                                          "id": "$formatpublicid $.Contract.Metadata.PublicId",
                                          "creationdate": "$.Contract.Metadata.CreationTimestamp",
                                          "description": {
                                            "$switch $.Contract.Metadata.Type": [
                                              {
                                                "case": "featured",
                                                "return": {
                                                  "$if $stringvalid $loc $.Contract.Metadata.Description": {
                                                    "$then": "$loc $.Contract.Metadata.Description",
                                                    "$else": "$.Contract.Metadata.Description"
                                                  }
                                                }
                                              },
                                              {
                                                "case": "creation",
                                                "return": "$loc UI_MENU_PAGE_CREATE_CONTRACT_NO_ACCESS_DESCRIPTION"
                                              },
                                              {
                                                "case": "elusive",
                                                "return": "$loc UI_CONTRACT_HEADER_ELUSIVE"
                                              },
                                              {
                                                "default": "$loc $.Contract.Metadata.Description"
                                              }
                                            ]
                                          },
                                          "image": {
                                            "$if $.Contract.Metadata.TileImage": {
                                              "$then": {
                                                "$if $gt ($arraysize $.Contract.Metadata.TileImage,0)": {
                                                  "$then": {
                                                    "$setup": {
                                                      "$set EngineMode": {
                                                        "$if $isnull $.EngineMode": {
                                                          "$then": {
                                                            "$if $isnull $arg EngineMode": {
                                                              "$then": "singleplayer",
                                                              "$else": "$arg EngineMode"
                                                            }
                                                          },
                                                          "$else": "$.EngineMode"
                                                        }
                                                      },
                                                      "$set TileImageOrdered": {
                                                        "$orderby": {
                                                          "from": "$expand $.Contract.Metadata.TileImage",
                                                          "by": "Mode",
                                                          "order": [
                                                            "$.EngineMode"
                                                          ]
                                                        }
                                                      },
                                                      "$in": "$res $.TileImageOrdered[0].Image"
                                                    }
                                                  },
                                                  "$else": "$res $expand $.Contract.Metadata.TileImage"
                                                }
                                              },
                                              "$else": "$res images/ui/tiles/defaultmenutilesmall.jpg"
                                            }
                                          },
                                          "icon": {
                                            "$switch $.Contract.Metadata.Type": [
                                              {
                                                "case": "dummy",
                                                "return": {
                                                  "_dynamicPackerOverride": [
                                                    "SniperChallenge"
                                                  ]
                                                }
                                              },
                                              {
                                                "case": "orbis",
                                                "return": "ica"
                                              },
                                              {
                                                "case": "campaign",
                                                "return": "mission"
                                              },
                                              {
                                                "case": "sniper",
                                                "return": "sniperrifle"
                                              },
                                              {
                                                "default": {
                                                  "$if $.Contract.Metadata.IsVersus": {
                                                    "$then": "versus",
                                                    "$else": "$.Contract.Metadata.Type"
                                                  }
                                                }
                                              }
                                            ]
                                          },
                                          "locked": true
                                        }
                                      }
                                    }
                                  },
                                  {
                                    "dlcmissing": {
                                      "$setup": {
                                        "$set DlcName": {
                                          "$if $isnull $.DlcName": {
                                            "$then": {
                                              "$if $isnull $.SubLocation": {
                                                "$then": {
                                                  "$if $isnull $.Location": {
                                                    "$then": "$loc $.Data.DlcName",
                                                    "$else": "$loc $.Location.Properties.DlcName"
                                                  }
                                                },
                                                "$else": "$loc $.SubLocation.Properties.DlcName"
                                              }
                                            },
                                            "$else": "$.DlcName"
                                          }
                                        },
                                        "$set DlcImage": {
                                          "$if $isnull $.DlcImage": {
                                            "$then": {
                                              "$if $isnull $.SubLocation": {
                                                "$then": {
                                                  "$if $isnull $.Location": {
                                                    "$then": "$res $.Data.DlcImage",
                                                    "$else": "$res $.Location.Properties.DlcImage"
                                                  }
                                                },
                                                "$else": "$res $.SubLocation.Properties.DlcImage"
                                              }
                                            },
                                            "$else": "$.DlcImage"
                                          }
                                        },
                                        "$set CreatedInMission": "$loc $formatstring UI_{$.Contract.Metadata.Location}_TITLE",
                                        "$set CreatedInLocation": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                                        "$in": {
                                          "showcreatedin": {
                                            "$switch $.Contract.Metadata.Type": [
                                              {
                                                "case": "featured",
                                                "return": true
                                              },
                                              {
                                                "case": "usercreated",
                                                "return": true
                                              },
                                              {
                                                "default": false
                                              }
                                            ]
                                          },
                                          "episode": "$.DlcName",
                                          "location": {
                                            "$loc": {
                                              "key": "UI_DIALOG_CONTRACT_SEARCH_CREATED_IN",
                                              "data": [
                                                "$formatstring {$.CreatedInMission}, {$.CreatedInLocation}"
                                              ]
                                            }
                                          },
                                          "description": {
                                            "$if $isnull $.DescriptionExpanded": {
                                              "$then": {
                                                "$loc": {
                                                  "key": "$.Description",
                                                  "data": [
                                                    "$.DlcName"
                                                  ]
                                                }
                                              },
                                              "$else": "$.DescriptionExpanded"
                                            }
                                          },
                                          "image": "$.DlcImage"
                                        }
                                      }
                                    }
                                  }
                                ],
                                "userresolution": {
                                  "$if": {
                                    "$condition": {
                                      "$and": [
                                        "$not $($isnull $.Contract)",
                                        {
                                          "$equal": [
                                            "usercreated",
                                            "$.Contract.Metadata.Type"
                                          ]
                                        }
                                      ]
                                    },
                                    "$then": {
                                      "informationtarget": "contract.creator",
                                      "profileid": "$.Contract.Metadata.CreatorUserId"
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "on-content-installing": {
                  "_comment": "DLC owned and currently installing",
                  "alter-actions": {
                    "path": "accept",
                    "value": {
                      "show-modal": {
                        "config": {
                          "view": "menu3.modal.ModalDialogGeneric",
                          "buttons": [
                            {
                              "label": "$loc UI_DIALOG_CANCEL",
                              "type": "cancel"
                            }
                          ],
                          "data": {
                            "$setup": {
                              "$set Title": "UI_DIALOG_CONTRACT_INSTALLING_TITLE",
                              "$set Description": "UI_DIALOG_CONTRACT_INSTALLING_DESCRIPTION",
                              "$in": {
                                "title": "$loc $.Title",
                                "frameheightmax": 850,
                                "information": [
                                  {
                                    "$if $not $($isnull $.Contract)": {
                                      "$then": {
                                        "contract": {
                                          "type": "$.Contract.Metadata.Type",
                                          "name": {
                                            "$switch $.Contract.Metadata.Type": [
                                              {
                                                "case": "usercreated",
                                                "return": {
                                                  "$if $($arg _ugcrestricted)": {
                                                    "$then": "$loc UI_CONTRACT_NO_ACCESS_UGC",
                                                    "$else": "$.Contract.Metadata.Title"
                                                  }
                                                }
                                              },
                                              {
                                                "case": "featured",
                                                "return": "$.Contract.Metadata.Title"
                                              },
                                              {
                                                "default": "$loc $.Contract.Metadata.Title"
                                              }
                                            ]
                                          },
                                          "creator": {
                                            "$switch $.Contract.Metadata.Type": [
                                              {
                                                "case": "featured",
                                                "return": "$loc UI_CATEGORY_MESSAGE_CENTER_COMMUNITY"
                                              },
                                              {
                                                "default": "$($user $.Contract.Metadata.CreatorUserId).name"
                                              }
                                            ]
                                          },
                                          "id": "$formatpublicid $.Contract.Metadata.PublicId",
                                          "creationdate": "$.Contract.Metadata.CreationTimestamp",
                                          "description": {
                                            "$switch $.Contract.Metadata.Type": [
                                              {
                                                "case": "featured",
                                                "return": {
                                                  "$if $stringvalid $loc $.Contract.Metadata.Description": {
                                                    "$then": "$loc $.Contract.Metadata.Description",
                                                    "$else": "$.Contract.Metadata.Description"
                                                  }
                                                }
                                              },
                                              {
                                                "case": "creation",
                                                "return": "$loc UI_MENU_PAGE_CREATE_CONTRACT_NO_ACCESS_DESCRIPTION"
                                              },
                                              {
                                                "case": "elusive",
                                                "return": "$loc UI_CONTRACT_HEADER_ELUSIVE"
                                              },
                                              {
                                                "default": "$loc $.Contract.Metadata.Description"
                                              }
                                            ]
                                          },
                                          "image": {
                                            "$if $.Contract.Metadata.TileImage": {
                                              "$then": {
                                                "$if $gt ($arraysize $.Contract.Metadata.TileImage,0)": {
                                                  "$then": {
                                                    "$setup": {
                                                      "$set EngineMode": {
                                                        "$if $isnull $.EngineMode": {
                                                          "$then": {
                                                            "$if $isnull $arg EngineMode": {
                                                              "$then": "singleplayer",
                                                              "$else": "$arg EngineMode"
                                                            }
                                                          },
                                                          "$else": "$.EngineMode"
                                                        }
                                                      },
                                                      "$set TileImageOrdered": {
                                                        "$orderby": {
                                                          "from": "$expand $.Contract.Metadata.TileImage",
                                                          "by": "Mode",
                                                          "order": [
                                                            "$.EngineMode"
                                                          ]
                                                        }
                                                      },
                                                      "$in": "$res $.TileImageOrdered[0].Image"
                                                    }
                                                  },
                                                  "$else": "$res $expand $.Contract.Metadata.TileImage"
                                                }
                                              },
                                              "$else": "$res images/ui/tiles/defaultmenutilesmall.jpg"
                                            }
                                          },
                                          "icon": {
                                            "$switch $.Contract.Metadata.Type": [
                                              {
                                                "case": "dummy",
                                                "return": {
                                                  "_dynamicPackerOverride": [
                                                    "SniperChallenge"
                                                  ]
                                                }
                                              },
                                              {
                                                "case": "orbis",
                                                "return": "ica"
                                              },
                                              {
                                                "case": "campaign",
                                                "return": "mission"
                                              },
                                              {
                                                "case": "sniper",
                                                "return": "sniperrifle"
                                              },
                                              {
                                                "default": {
                                                  "$if $.Contract.Metadata.IsVersus": {
                                                    "$then": "versus",
                                                    "$else": "$.Contract.Metadata.Type"
                                                  }
                                                }
                                              }
                                            ]
                                          },
                                          "locked": true
                                        }
                                      }
                                    }
                                  },
                                  {
                                    "dlcmissing": {
                                      "$setup": {
                                        "$set DlcName": {
                                          "$if $isnull $.DlcName": {
                                            "$then": {
                                              "$if $isnull $.SubLocation": {
                                                "$then": {
                                                  "$if $isnull $.Location": {
                                                    "$then": "$loc $.Data.DlcName",
                                                    "$else": "$loc $.Location.Properties.DlcName"
                                                  }
                                                },
                                                "$else": "$loc $.SubLocation.Properties.DlcName"
                                              }
                                            },
                                            "$else": "$.DlcName"
                                          }
                                        },
                                        "$set DlcImage": {
                                          "$if $isnull $.DlcImage": {
                                            "$then": {
                                              "$if $isnull $.SubLocation": {
                                                "$then": {
                                                  "$if $isnull $.Location": {
                                                    "$then": "$res $.Data.DlcImage",
                                                    "$else": "$res $.Location.Properties.DlcImage"
                                                  }
                                                },
                                                "$else": "$res $.SubLocation.Properties.DlcImage"
                                              }
                                            },
                                            "$else": "$.DlcImage"
                                          }
                                        },
                                        "$set CreatedInMission": "$loc $formatstring UI_{$.Contract.Metadata.Location}_TITLE",
                                        "$set CreatedInLocation": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                                        "$in": {
                                          "showcreatedin": {
                                            "$switch $.Contract.Metadata.Type": [
                                              {
                                                "case": "featured",
                                                "return": true
                                              },
                                              {
                                                "case": "usercreated",
                                                "return": true
                                              },
                                              {
                                                "default": false
                                              }
                                            ]
                                          },
                                          "episode": "$.DlcName",
                                          "location": {
                                            "$loc": {
                                              "key": "UI_DIALOG_CONTRACT_SEARCH_CREATED_IN",
                                              "data": [
                                                "$formatstring {$.CreatedInMission}, {$.CreatedInLocation}"
                                              ]
                                            }
                                          },
                                          "description": {
                                            "$if $isnull $.DescriptionExpanded": {
                                              "$then": {
                                                "$loc": {
                                                  "key": "$.Description",
                                                  "data": [
                                                    "$.DlcName"
                                                  ]
                                                }
                                              },
                                              "$else": "$.DescriptionExpanded"
                                            }
                                          },
                                          "image": "$.DlcImage"
                                        }
                                      }
                                    }
                                  }
                                ],
                                "userresolution": {
                                  "$if": {
                                    "$condition": {
                                      "$and": [
                                        "$not $($isnull $.Contract)",
                                        {
                                          "$equal": [
                                            "usercreated",
                                            "$.Contract.Metadata.Type"
                                          ]
                                        }
                                      ]
                                    },
                                    "$then": {
                                      "informationtarget": "contract.creator",
                                      "profileid": "$.Contract.Metadata.CreatorUserId"
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "on-entitlement-missing": {
                  "_comment": "Entitlement missing",
                  "alter-actions": {
                    "path": "accept",
                    "value": {
                      "show-modal": {
                        "config": {
                          "view": "menu3.modal.ModalDialogGeneric",
                          "buttons": [
                            {
                              "label": {
                                "$setup": {
                                  "$set Store": {
                                    "$switch $arg _platform": [
                                      {
                                        "case": "pc",
                                        "return": "UI_MENU_GO_TO_STORE"
                                      },
                                      {
                                        "case": "orbis",
                                        "return": "UI_MENU_GO_TO_STORE_PSN"
                                      },
                                      {
                                        "case": "durango",
                                        "return": "UI_MENU_GO_TO_STORE_XBOX"
                                      }
                                    ]
                                  },
                                  "$in": "$formatstring {$loc UI_MENU_PAGE_FEATURED_GOTO_HEADER} {$loc $.Store}"
                                }
                              },
                              "icon": "arrowright"
                            },
                            {
                              "label": "$loc UI_DIALOG_CANCEL",
                              "type": "cancel"
                            }
                          ],
                          "data": {
                            "$setup": {
                              "$set DlcName": {
                                "$notransform": {
                                  "$if": {
                                    "$condition": {
                                      "$or": [
                                        "$eqs ($.MissingEntitlements[0].Id,GOTY_PATIENT_ZERO)",
                                        "$eqs ($.MissingEntitlements[0].Id,TOKEN_OUTFIT_PARIS_CLOWN)",
                                        "$eqs ($.MissingEntitlements[0].Id,TOKEN_OUTFIT_MARRAKESH_DARK_SNIPER)",
                                        "$eqs ($.MissingEntitlements[0].Id,TOKEN_OUTFIT_HOKKAIDO_COWBOY)"
                                      ]
                                    },
                                    "$then": {
                                      "$if": {
                                        "$condition": {
                                          "$or": [
                                            "$isuser intropack",
                                            "$isuser fullexperience"
                                          ]
                                        },
                                        "$then": "$loc GAME_STORE_METADATA_LEGACY_PACKAGE_LEGACY_GOTY_UPGRADE_TITLE",
                                        "$else": "$loc GAME_STORE_METADATA_LEGACY_PACKAGE_LEGACY_GOTY_BUNDLE_TITLE"
                                      }
                                    },
                                    "$else": {
                                      "$if $eqs ($.MissingEntitlements[0].Id,LOCATION_NEWZEALAND)": {
                                        "$then": "$loc GAME_STORE_METADATA_S2_DLC07_TITLE"
                                      }
                                    }
                                  }
                                }
                              },
                              "$set DlcImage": {
                                "$notransform": {
                                  "$if": {
                                    "$condition": {
                                      "$or": [
                                        "$eqs ($.MissingEntitlements[0].Id,GOTY_PATIENT_ZERO)",
                                        "$eqs ($.MissingEntitlements[0].Id,TOKEN_OUTFIT_PARIS_CLOWN)",
                                        "$eqs ($.MissingEntitlements[0].Id,TOKEN_OUTFIT_MARRAKESH_DARK_SNIPER)",
                                        "$eqs ($.MissingEntitlements[0].Id,TOKEN_OUTFIT_HOKKAIDO_COWBOY)"
                                      ]
                                    },
                                    "$then": {
                                      "$if": {
                                        "$condition": {
                                          "$or": [
                                            "$isuser intropack",
                                            "$isuser fullexperience"
                                          ]
                                        },
                                        "$then": "$res images/livetile/dlc/tile_goty_cfs_legacy.jpg",
                                        "$else": "$res images/livetile/dlc/tile_goty_legacy.jpg"
                                      }
                                    },
                                    "$else": {
                                      "$if $eqs ($.MissingEntitlements[0].Id,LOCATION_NEWZEALAND)": {
                                        "$then": "$res images/livetile/dlc/newzealand_wide_logo.png"
                                      }
                                    }
                                  }
                                }
                              },
                              "$set Title": "UI_DIALOG_CONTRACT_ENTITLEMENT_MISSING_TITLE",
                              "$set DescriptionExpanded": {
                                "$notransform": {
                                  "$loc": {
                                    "key": "UI_DIALOG_CONTRACT_ENTITLEMENT_MISSING_DESCRIPTION",
                                    "data": [
                                      {
                                        "$if": {
                                          "$condition": {
                                            "$or": [
                                              "$eqs ($.MissingEntitlements[0].Id,GOTY_PATIENT_ZERO)",
                                              "$eqs ($.MissingEntitlements[0].Id,TOKEN_OUTFIT_PARIS_CLOWN)",
                                              "$eqs ($.MissingEntitlements[0].Id,TOKEN_OUTFIT_MARRAKESH_DARK_SNIPER)",
                                              "$eqs ($.MissingEntitlements[0].Id,TOKEN_OUTFIT_HOKKAIDO_COWBOY)"
                                            ]
                                          },
                                          "$then": {
                                            "$if": {
                                              "$condition": {
                                                "$or": [
                                                  "$isuser intropack",
                                                  "$isuser fullexperience"
                                                ]
                                              },
                                              "$then": "$loc GAME_STORE_METADATA_LEGACY_PACKAGE_LEGACY_GOTY_UPGRADE_TITLE",
                                              "$else": "$loc GAME_STORE_METADATA_LEGACY_PACKAGE_LEGACY_GOTY_BUNDLE_TITLE"
                                            }
                                          },
                                          "$else": {
                                            "$if $eqs ($.MissingEntitlements[0].Id,LOCATION_NEWZEALAND)": {
                                              "$then": "$loc GAME_STORE_METADATA_S2_DLC07_TITLE"
                                            }
                                          }
                                        }
                                      }
                                    ]
                                  }
                                }
                              },
                              "$in": {
                                "title": "$loc $.Title",
                                "frameheightmax": 850,
                                "information": [
                                  {
                                    "$if $not $($isnull $.Contract)": {
                                      "$then": {
                                        "contract": {
                                          "type": "$.Contract.Metadata.Type",
                                          "name": {
                                            "$switch $.Contract.Metadata.Type": [
                                              {
                                                "case": "usercreated",
                                                "return": {
                                                  "$if $($arg _ugcrestricted)": {
                                                    "$then": "$loc UI_CONTRACT_NO_ACCESS_UGC",
                                                    "$else": "$.Contract.Metadata.Title"
                                                  }
                                                }
                                              },
                                              {
                                                "case": "featured",
                                                "return": "$.Contract.Metadata.Title"
                                              },
                                              {
                                                "default": "$loc $.Contract.Metadata.Title"
                                              }
                                            ]
                                          },
                                          "creator": {
                                            "$switch $.Contract.Metadata.Type": [
                                              {
                                                "case": "featured",
                                                "return": "$loc UI_CATEGORY_MESSAGE_CENTER_COMMUNITY"
                                              },
                                              {
                                                "default": "$($user $.Contract.Metadata.CreatorUserId).name"
                                              }
                                            ]
                                          },
                                          "id": "$formatpublicid $.Contract.Metadata.PublicId",
                                          "creationdate": "$.Contract.Metadata.CreationTimestamp",
                                          "description": {
                                            "$switch $.Contract.Metadata.Type": [
                                              {
                                                "case": "featured",
                                                "return": {
                                                  "$if $stringvalid $loc $.Contract.Metadata.Description": {
                                                    "$then": "$loc $.Contract.Metadata.Description",
                                                    "$else": "$.Contract.Metadata.Description"
                                                  }
                                                }
                                              },
                                              {
                                                "case": "creation",
                                                "return": "$loc UI_MENU_PAGE_CREATE_CONTRACT_NO_ACCESS_DESCRIPTION"
                                              },
                                              {
                                                "case": "elusive",
                                                "return": "$loc UI_CONTRACT_HEADER_ELUSIVE"
                                              },
                                              {
                                                "default": "$loc $.Contract.Metadata.Description"
                                              }
                                            ]
                                          },
                                          "image": {
                                            "$if $.Contract.Metadata.TileImage": {
                                              "$then": {
                                                "$if $gt ($arraysize $.Contract.Metadata.TileImage,0)": {
                                                  "$then": {
                                                    "$setup": {
                                                      "$set EngineMode": {
                                                        "$if $isnull $.EngineMode": {
                                                          "$then": {
                                                            "$if $isnull $arg EngineMode": {
                                                              "$then": "singleplayer",
                                                              "$else": "$arg EngineMode"
                                                            }
                                                          },
                                                          "$else": "$.EngineMode"
                                                        }
                                                      },
                                                      "$set TileImageOrdered": {
                                                        "$orderby": {
                                                          "from": "$expand $.Contract.Metadata.TileImage",
                                                          "by": "Mode",
                                                          "order": [
                                                            "$.EngineMode"
                                                          ]
                                                        }
                                                      },
                                                      "$in": "$res $.TileImageOrdered[0].Image"
                                                    }
                                                  },
                                                  "$else": "$res $expand $.Contract.Metadata.TileImage"
                                                }
                                              },
                                              "$else": "$res images/ui/tiles/defaultmenutilesmall.jpg"
                                            }
                                          },
                                          "icon": {
                                            "$switch $.Contract.Metadata.Type": [
                                              {
                                                "case": "dummy",
                                                "return": {
                                                  "_dynamicPackerOverride": [
                                                    "SniperChallenge"
                                                  ]
                                                }
                                              },
                                              {
                                                "case": "orbis",
                                                "return": "ica"
                                              },
                                              {
                                                "case": "campaign",
                                                "return": "mission"
                                              },
                                              {
                                                "case": "sniper",
                                                "return": "sniperrifle"
                                              },
                                              {
                                                "default": {
                                                  "$if $.Contract.Metadata.IsVersus": {
                                                    "$then": "versus",
                                                    "$else": "$.Contract.Metadata.Type"
                                                  }
                                                }
                                              }
                                            ]
                                          },
                                          "locked": true
                                        }
                                      }
                                    }
                                  },
                                  {
                                    "dlcmissing": {
                                      "$setup": {
                                        "$set DlcName": {
                                          "$if $isnull $.DlcName": {
                                            "$then": {
                                              "$if $isnull $.SubLocation": {
                                                "$then": {
                                                  "$if $isnull $.Location": {
                                                    "$then": "$loc $.Data.DlcName",
                                                    "$else": "$loc $.Location.Properties.DlcName"
                                                  }
                                                },
                                                "$else": "$loc $.SubLocation.Properties.DlcName"
                                              }
                                            },
                                            "$else": "$.DlcName"
                                          }
                                        },
                                        "$set DlcImage": {
                                          "$if $isnull $.DlcImage": {
                                            "$then": {
                                              "$if $isnull $.SubLocation": {
                                                "$then": {
                                                  "$if $isnull $.Location": {
                                                    "$then": "$res $.Data.DlcImage",
                                                    "$else": "$res $.Location.Properties.DlcImage"
                                                  }
                                                },
                                                "$else": "$res $.SubLocation.Properties.DlcImage"
                                              }
                                            },
                                            "$else": "$.DlcImage"
                                          }
                                        },
                                        "$set CreatedInMission": "$loc $formatstring UI_{$.Contract.Metadata.Location}_TITLE",
                                        "$set CreatedInLocation": "$loc $formatstring UI_{$.Contract.Metadata.Location}_CITY",
                                        "$in": {
                                          "showcreatedin": {
                                            "$switch $.Contract.Metadata.Type": [
                                              {
                                                "case": "featured",
                                                "return": true
                                              },
                                              {
                                                "case": "usercreated",
                                                "return": true
                                              },
                                              {
                                                "default": false
                                              }
                                            ]
                                          },
                                          "episode": "$.DlcName",
                                          "location": {
                                            "$loc": {
                                              "key": "UI_DIALOG_CONTRACT_SEARCH_CREATED_IN",
                                              "data": [
                                                "$formatstring {$.CreatedInMission}, {$.CreatedInLocation}"
                                              ]
                                            }
                                          },
                                          "description": {
                                            "$if $isnull $.DescriptionExpanded": {
                                              "$then": {
                                                "$loc": {
                                                  "key": "$.Description",
                                                  "data": [
                                                    "$.DlcName"
                                                  ]
                                                }
                                              },
                                              "$else": "$.DescriptionExpanded"
                                            }
                                          },
                                          "image": "$.DlcImage"
                                        }
                                      }
                                    }
                                  }
                                ],
                                "userresolution": {
                                  "$if": {
                                    "$condition": {
                                      "$and": [
                                        "$not $($isnull $.Contract)",
                                        {
                                          "$equal": [
                                            "usercreated",
                                            "$.Contract.Metadata.Type"
                                          ]
                                        }
                                      ]
                                    },
                                    "$then": {
                                      "informationtarget": "contract.creator",
                                      "profileid": "$.Contract.Metadata.CreatorUserId"
                                    }
                                  }
                                }
                              }
                            }
                          }
                        },
                        "onbutton": [
                          {
                            "$notransform": {
                              "show-store-item-detail": {
                                "itemId": {
                                  "$if": {
                                    "$condition": {
                                      "$or": [
                                        "$eqs ($.MissingEntitlements[0].Id,GOTY_PATIENT_ZERO)",
                                        "$eqs ($.MissingEntitlements[0].Id,TOKEN_OUTFIT_PARIS_CLOWN)",
                                        "$eqs ($.MissingEntitlements[0].Id,TOKEN_OUTFIT_MARRAKESH_DARK_SNIPER)",
                                        "$eqs ($.MissingEntitlements[0].Id,TOKEN_OUTFIT_HOKKAIDO_COWBOY)"
                                      ]
                                    },
                                    "$then": {
                                      "$if": {
                                        "$condition": {
                                          "$and": [
                                            "$not $isuser season2",
                                            {
                                              "$if": {
                                                "$condition": {
                                                  "$or": [
                                                    "$eqs ($arg _platform,orbis)",
                                                    "$eqs ($.Platform,orbis)"
                                                  ]
                                                },
                                                "$then": true,
                                                "$else": false
                                              }
                                            }
                                          ]
                                        },
                                        "$then": {
                                          "$setup": {
                                            "$set Platform": {
                                              "$if $isnull $.Platform": {
                                                "$then": "$arg _platform",
                                                "$else": "$.Platform"
                                              }
                                            },
                                            "$set Region": {
                                              "$if $isnull $.Region": {
                                                "$then": "$arg _region",
                                                "$else": "$.Region"
                                              }
                                            },
                                            "$in": {
                                              "$switch $.Platform": [
                                                {
                                                  "case": "pc",
                                                  "return": "863550"
                                                },
                                                {
                                                  "case": "orbis",
                                                  "return": {
                                                    "$switch $.Region": [
                                                      {
                                                        "case": "asia",
                                                        "return": "STARTPACK0000000"
                                                      },
                                                      {
                                                        "case": "jp",
                                                        "return": "HITMANSTANDARD00"
                                                      },
                                                      {
                                                        "default": "STARTPACK0000000"
                                                      }
                                                    ]
                                                  }
                                                },
                                                {
                                                  "case": "durango",
                                                  "return": "dbbf8074-f8e5-48c6-8162-f4af3cdcdcb8"
                                                }
                                              ]
                                            }
                                          }
                                        },
                                        "$else": {
                                          "$if": {
                                            "$condition": {
                                              "$or": [
                                                "$isuser intropack",
                                                "$isuser fullexperience"
                                              ]
                                            },
                                            "$then": {
                                              "$setup": {
                                                "$set Platform": {
                                                  "$if $isnull $.Platform": {
                                                    "$then": "$arg _platform",
                                                    "$else": "$.Platform"
                                                  }
                                                },
                                                "$set Region": {
                                                  "$if $isnull $.Region": {
                                                    "$then": "$arg _region",
                                                    "$else": "$.Region"
                                                  }
                                                },
                                                "$in": {
                                                  "$switch $.Platform": [
                                                    {
                                                      "case": "pc",
                                                      "return": "960832"
                                                    },
                                                    {
                                                      "case": "orbis",
                                                      "return": {
                                                        "$switch $.Region": [
                                                          {
                                                            "case": "asia",
                                                            "return": "S1GOTYUPASIA0000"
                                                          },
                                                          {
                                                            "case": "jp",
                                                            "return": "S1GOTYUPASIA0000"
                                                          },
                                                          {
                                                            "default": "S1GOTYUPGRADE000"
                                                          }
                                                        ]
                                                      }
                                                    },
                                                    {
                                                      "case": "durango",
                                                      "return": "fdb4873a-b559-4cbd-addc-625f833de81b"
                                                    }
                                                  ]
                                                }
                                              }
                                            },
                                            "$else": {
                                              "$setup": {
                                                "$set Platform": {
                                                  "$if $isnull $.Platform": {
                                                    "$then": "$arg _platform",
                                                    "$else": "$.Platform"
                                                  }
                                                },
                                                "$set Region": {
                                                  "$if $isnull $.Region": {
                                                    "$then": "$arg _region",
                                                    "$else": "$.Region"
                                                  }
                                                },
                                                "$in": {
                                                  "$switch $.Platform": [
                                                    {
                                                      "case": "pc",
                                                      "return": "960831"
                                                    },
                                                    {
                                                      "case": "orbis",
                                                      "return": {
                                                        "$switch $.Region": [
                                                          {
                                                            "case": "asia",
                                                            "return": "S1GOTYASIA000000"
                                                          },
                                                          {
                                                            "default": "S1GOTY0000000000"
                                                          }
                                                        ]
                                                      }
                                                    },
                                                    {
                                                      "case": "durango",
                                                      "return": {
                                                        "$if $isuser season2partial": {
                                                          "$then": "a8b30989-98b0-484f-ada0-71dd5117ed58",
                                                          "$else": "452917d6-f81e-435b-9da4-6891e22326a6"
                                                        }
                                                      }
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    },
                                    "$else": "$.MissingEntitlements[0].StoreId"
                                  }
                                }
                              }
                            }
                          }
                        ]
                      }
                    }
                  }
                }
              },
              {
                "on-content-available": {
                  "_comment": "Contract is ready to be played",
                  "alter-actions": {
                    "path": "accept",
                    "value": {
                      "$if": {
                        "$condition": {
                          "$and": [
                            "$.Data.IsLocked",
                            {
                              "$or": [
                                "$isnull $.lockoverride",
                                "$.lockoverride"
                              ]
                            }
                          ]
                        },
                        "$then": {
                          "show-modal": {
                            "config": {
                              "view": "menu3.modal.ModalDialogGeneric",
                              "buttons": [
                                "$loc UI_DIALOG_CONFIRM",
                                {
                                  "label": "$loc UI_DIALOG_CANCEL",
                                  "type": "cancel"
                                }
                              ],
                              "data": {
                                "title": "$loc UI_LOCKED_CONTENT_DIALOGUE_TITLE",
                                "description": {
                                  "$switch $.Contract.Metadata.Type": [
                                    {
                                      "case": "orbis",
                                      "return": "$loc UI_LOCKED_CONTENT_DIALOGUE_TEXT_SARAJEVO6"
                                    },
                                    {
                                      "default": "$loc UI_LOCKED_CONTENT_DIALOGUE_TEXT"
                                    }
                                  ]
                                }
                              }
                            },
                            "onbutton": [
                              {
                                "trigger-action": {
                                  "name": "on-goto-planning"
                                }
                              }
                            ]
                          }
                        },
                        "$else": {
                          "trigger-action": {
                            "name": "on-goto-planning"
                          }
                        }
                      }
                    }
                  }
                },
                "on-goto-planning": {
                  "$switch $.Contract.Metadata.Type": [
                    {
                      "case": "creation",
                      "return": {
                        "link": {
                          "page": "contractcreation_planning",
                          "args": {
                            "url": "contractcreation/planning",
                            "args": {
                              "location": "$.Contract.Metadata.Location",
                              "contractCreationIdOverwrite": "$.Contract.Metadata.Id"
                            },
                            "contractid": "$.Contract.Metadata.Id"
                          }
                        }
                      }
                    },
                    {
                      "default": {
                        "$if": {
                          "$condition": {
                            "$isfreeprologueuser": ""
                          },
                          "$then": {
                            "$if $.fspdashboardcontract": {
                              "$then": {
                                "clear-contract-menu-context": {},
                                "set-contract-loading-screen-data": {
                                  "contract": "$.Contract"
                                },
                                "start-contract": {
                                  "contractid": "$.fspdashboardcontract.contractid"
                                }
                              },
                              "$else": {
                                "is-playable": {
                                  "playableSince": "$.Contract.Metadata.PlayableSince",
                                  "on-success": {
                                    "$merge": [
                                      {
                                        "$if": {
                                          "$condition": {
                                            "$and": [
                                              "$eqs ($.Contract.Metadata.Type,placeholder)",
                                              "$.Data.LastPlayedAt",
                                              "$.Data.EscalationCompleted"
                                            ]
                                          },
                                          "$then": [
                                            {
                                              "alter-history": {
                                                "target": "destination",
                                                "force-no-cache": true
                                              }
                                            },
                                            {
                                              "alter-history": {
                                                "target": "hub",
                                                "force-no-cache": true
                                              }
                                            }
                                          ],
                                          "$else": null
                                        }
                                      },
                                      {
                                        "$switch $.Contract.Metadata.BriefingVideo": [
                                          {
                                            "case": null,
                                            "return": {
                                              "link": {
                                                "page": {
                                                  "$if $eqs ($.EngineMode,multiplayer)": {
                                                    "$then": "planning_multiplayer",
                                                    "$else": "planning"
                                                  }
                                                },
                                                "isMultiplayer": {
                                                  "$if $eqs ($.EngineMode,multiplayer)": {
                                                    "$then": true,
                                                    "$else": false
                                                  }
                                                },
                                                "args": {
                                                  "url": "planning",
                                                  "args": {
                                                    "contractid": "$.Contract.Metadata.Id",
                                                    "resetescalation": {
                                                      "$if": {
                                                        "$condition": {
                                                          "$and": [
                                                            "$eqs ($.Contract.Metadata.Type,placeholder)",
                                                            "$.Data.LastPlayedAt",
                                                            "$.Data.EscalationCompleted"
                                                          ]
                                                        },
                                                        "$then": true,
                                                        "$else": false
                                                      }
                                                    }
                                                  },
                                                  "contractid": "$.Contract.Metadata.Id"
                                                }
                                              }
                                            }
                                          },
                                          {
                                            "default": {
                                              "link": {
                                                "page": "video",
                                                "addtohistory": false,
                                                "args": {
                                                  "videoid": "$.Contract.Metadata.BriefingVideo",
                                                  "mountrootresources": "$formatstring [{$.Contract.Metadata.ScenePath}].entitytemplate",
                                                  "skipifshown": true,
                                                  "EngineMode": "$.EngineMode",
                                                  "link": {
                                                    "page": {
                                                      "$if $eqs ($.EngineMode,multiplayer)": {
                                                        "$then": "planning_multiplayer",
                                                        "$else": "planning"
                                                      }
                                                    },
                                                    "isMultiplayer": {
                                                      "$if $eqs ($.EngineMode,multiplayer)": {
                                                        "$then": true,
                                                        "$else": false
                                                      }
                                                    },
                                                    "args": {
                                                      "url": "planning",
                                                      "args": {
                                                        "contractid": "$.Contract.Metadata.Id",
                                                        "resetescalation": {
                                                          "$if": {
                                                            "$condition": {
                                                              "$and": [
                                                                "$eqs ($.Contract.Metadata.Type,placeholder)",
                                                                "$.Data.LastPlayedAt",
                                                                "$.Data.EscalationCompleted"
                                                              ]
                                                            },
                                                            "$then": true,
                                                            "$else": false
                                                          }
                                                        }
                                                      },
                                                      "contractid": "$.Contract.Metadata.Id"
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  "on-failure-too-early": {
                                    "$if": {
                                      "$condition": {
                                        "$and": [
                                          "$eqs ($.Contract.Metadata.Type,elusive)",
                                          "$stringvalid $.Data.ElusiveContractState",
                                          "$stringvalid $.Data.LastPlayedAt",
                                          "$lt ($converttimetonumber $.Data.LastPlayedAt,$converttimetonumber $.Contract.Metadata.PlayableSince)"
                                        ]
                                      },
                                      "$then": {
                                        "show-modal": {
                                          "config": {
                                            "view": "menu3.modal.ModalDialogGeneric",
                                            "buttons": [
                                              {
                                                "label": "$loc UI_DIALOG_CONFIRM_TITLE",
                                                "type": "cancel"
                                              }
                                            ],
                                            "data": {
                                              "title": "$loc UI_MENU_PAGE_PLANNING_ELEMENT_LOADOUT_ERROR_STARTING_CONTRACT_ET",
                                              "description": "$loc UI_MENU_ERROR_STARTING_ELUSIVE_CONTRACT_NOT_PLAYABLE_YET_PREVIOUSLY_PLAYED_DESCRIPTION"
                                            }
                                          }
                                        }
                                      },
                                      "$else": {
                                        "show-modal": {
                                          "config": {
                                            "view": "menu3.modal.ModalDialogGeneric",
                                            "buttons": [
                                              {
                                                "label": "$loc UI_DIALOG_CONFIRM_TITLE",
                                                "type": "cancel"
                                              }
                                            ],
                                            "data": {
                                              "title": "$loc UI_MENU_PAGE_PLANNING_ELEMENT_LOADOUT_ERROR_STARTING_CONTRACT_ET",
                                              "description": "$loc UI_MENU_PAGE_PLANNING_ELEMENT_LOADOUT_ERROR_STARTING_CONTRACT_NOT_PLAYABLE_YET_DESCRIPTION_ET",
                                              "_comment": "HACK: use typeoverride to make the buttons work",
                                              "typeoverride": "online"
                                            }
                                          }
                                        }
                                      }
                                    }
                                  },
                                  "on-failure-too-late": {
                                    "_comment": "this is never reached, because we don't set playabelUntil above - by design",
                                    "show-modal": {
                                      "config": {
                                        "view": "menu3.modal.ModalDialogGeneric",
                                        "buttons": [
                                          {
                                            "label": "$loc UI_DIALOG_CONFIRM_TITLE",
                                            "type": "cancel"
                                          }
                                        ],
                                        "data": {
                                          "title": "$loc UI_MENU_PAGE_PLANNING_ELEMENT_LOADOUT_ERROR_STARTING_CONTRACT_ET",
                                          "description": "$loc UI_MENU_PAGE_PLANNING_ELEMENT_LOADOUT_ERROR_STARTING_CONTRACT_NOT_PLAYABLE_ANYMORE_DESCRIPTION_ET"
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "$else": {
                            "is-playable": {
                              "playableSince": "$.Contract.Metadata.PlayableSince",
                              "on-success": {
                                "$merge": [
                                  {
                                    "$if": {
                                      "$condition": {
                                        "$and": [
                                          "$eqs ($.Contract.Metadata.Type,placeholder)",
                                          "$.Data.LastPlayedAt",
                                          "$.Data.EscalationCompleted"
                                        ]
                                      },
                                      "$then": [
                                        {
                                          "alter-history": {
                                            "target": "destination",
                                            "force-no-cache": true
                                          }
                                        },
                                        {
                                          "alter-history": {
                                            "target": "hub",
                                            "force-no-cache": true
                                          }
                                        }
                                      ],
                                      "$else": null
                                    }
                                  },
                                  {
                                    "$switch $.Contract.Metadata.BriefingVideo": [
                                      {
                                        "case": null,
                                        "return": {
                                          "link": {
                                            "page": {
                                              "$if $eqs ($.EngineMode,multiplayer)": {
                                                "$then": "planning_multiplayer",
                                                "$else": "planning"
                                              }
                                            },
                                            "isMultiplayer": {
                                              "$if $eqs ($.EngineMode,multiplayer)": {
                                                "$then": true,
                                                "$else": false
                                              }
                                            },
                                            "args": {
                                              "url": "planning",
                                              "args": {
                                                "contractid": "$.Contract.Metadata.Id",
                                                "resetescalation": {
                                                  "$if": {
                                                    "$condition": {
                                                      "$and": [
                                                        "$eqs ($.Contract.Metadata.Type,placeholder)",
                                                        "$.Data.LastPlayedAt",
                                                        "$.Data.EscalationCompleted"
                                                      ]
                                                    },
                                                    "$then": true,
                                                    "$else": false
                                                  }
                                                }
                                              },
                                              "contractid": "$.Contract.Metadata.Id"
                                            }
                                          }
                                        }
                                      },
                                      {
                                        "default": {
                                          "link": {
                                            "page": "video",
                                            "addtohistory": false,
                                            "args": {
                                              "videoid": "$.Contract.Metadata.BriefingVideo",
                                              "mountrootresources": "$formatstring [{$.Contract.Metadata.ScenePath}].entitytemplate",
                                              "skipifshown": true,
                                              "EngineMode": "$.EngineMode",
                                              "link": {
                                                "page": {
                                                  "$if $eqs ($.EngineMode,multiplayer)": {
                                                    "$then": "planning_multiplayer",
                                                    "$else": "planning"
                                                  }
                                                },
                                                "isMultiplayer": {
                                                  "$if $eqs ($.EngineMode,multiplayer)": {
                                                    "$then": true,
                                                    "$else": false
                                                  }
                                                },
                                                "args": {
                                                  "url": "planning",
                                                  "args": {
                                                    "contractid": "$.Contract.Metadata.Id",
                                                    "resetescalation": {
                                                      "$if": {
                                                        "$condition": {
                                                          "$and": [
                                                            "$eqs ($.Contract.Metadata.Type,placeholder)",
                                                            "$.Data.LastPlayedAt",
                                                            "$.Data.EscalationCompleted"
                                                          ]
                                                        },
                                                        "$then": true,
                                                        "$else": false
                                                      }
                                                    }
                                                  },
                                                  "contractid": "$.Contract.Metadata.Id"
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    ]
                                  }
                                ]
                              },
                              "on-failure-too-early": {
                                "$if": {
                                  "$condition": {
                                    "$and": [
                                      "$eqs ($.Contract.Metadata.Type,elusive)",
                                      "$stringvalid $.Data.ElusiveContractState",
                                      "$stringvalid $.Data.LastPlayedAt",
                                      "$lt ($converttimetonumber $.Data.LastPlayedAt,$converttimetonumber $.Contract.Metadata.PlayableSince)"
                                    ]
                                  },
                                  "$then": {
                                    "show-modal": {
                                      "config": {
                                        "view": "menu3.modal.ModalDialogGeneric",
                                        "buttons": [
                                          {
                                            "label": "$loc UI_DIALOG_CONFIRM_TITLE",
                                            "type": "cancel"
                                          }
                                        ],
                                        "data": {
                                          "title": "$loc UI_MENU_PAGE_PLANNING_ELEMENT_LOADOUT_ERROR_STARTING_CONTRACT_ET",
                                          "description": "$loc UI_MENU_ERROR_STARTING_ELUSIVE_CONTRACT_NOT_PLAYABLE_YET_PREVIOUSLY_PLAYED_DESCRIPTION"
                                        }
                                      }
                                    }
                                  },
                                  "$else": {
                                    "show-modal": {
                                      "config": {
                                        "view": "menu3.modal.ModalDialogGeneric",
                                        "buttons": [
                                          {
                                            "label": "$loc UI_DIALOG_CONFIRM_TITLE",
                                            "type": "cancel"
                                          }
                                        ],
                                        "data": {
                                          "title": "$loc UI_MENU_PAGE_PLANNING_ELEMENT_LOADOUT_ERROR_STARTING_CONTRACT_ET",
                                          "description": "$loc UI_MENU_PAGE_PLANNING_ELEMENT_LOADOUT_ERROR_STARTING_CONTRACT_NOT_PLAYABLE_YET_DESCRIPTION_ET",
                                          "_comment": "HACK: use typeoverride to make the buttons work",
                                          "typeoverride": "online"
                                        }
                                      }
                                    }
                                  }
                                }
                              },
                              "on-failure-too-late": {
                                "_comment": "this is never reached, because we don't set playabelUntil above - by design",
                                "show-modal": {
                                  "config": {
                                    "view": "menu3.modal.ModalDialogGeneric",
                                    "buttons": [
                                      {
                                        "label": "$loc UI_DIALOG_CONFIRM_TITLE",
                                        "type": "cancel"
                                      }
                                    ],
                                    "data": {
                                      "title": "$loc UI_MENU_PAGE_PLANNING_ELEMENT_LOADOUT_ERROR_STARTING_CONTRACT_ET",
                                      "description": "$loc UI_MENU_PAGE_PLANNING_ELEMENT_LOADOUT_ERROR_STARTING_CONTRACT_NOT_PLAYABLE_ANYMORE_DESCRIPTION_ET"
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        ]
      },
      "buttons": {
        "$if $.SkipButtonPrompts": {
          "$then": [],
          "$else": [
            {
              "actiontype": "lt_rt",
              "actionlabel": "$loc UI_BUTTON_PROMPTS_ACTION_PREVNEXT_TILE",
              "customplatform": {
                "platform": "key",
                "actiontype": "mouse_mmb_up_down"
              }
            }
          ]
        }
      }
    }
  }
}